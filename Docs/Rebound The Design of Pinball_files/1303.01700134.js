(self.webpackChunkgiantbomb=self.webpackChunkgiantbomb||[]).push([[1303],{8738:(e,t,a)=>{var i=a(9755);!function(e){"use strict";var t,a=e.Phoenix;a||(e.Phoenix=a={}),t=a.VideoPlayer=a.VideoPlayer||{};"undefined"!=typeof athenaPlayerMode&&athenaPlayerMode;var n=!1,r=!1,s=!1,o=[],l=[],u=t.log=function(){var e=o.push;if(e.apply?e.apply(o,[arguments]):e(Array.prototype.slice.call([arguments])),s&&3===arguments.length)throw arguments[2]};!0===r&&window.addEventListener("error",(function(e){e.error?u("Uncaught Exception: ",{error:e.error.toString(),stack:e.error.stack}):u("Uncaught Exception: ",e)}));t.getLogLines=function(e){var t=e||200,a=l.slice(Math.max(l.length-t,1)),i=[];return _.each(a,(function(e){var t=[];_.each(e,(function(e){_.isObject(e)?t.push(_.mapObject(e,(function(e,t){return _.isObject(e)?e.toString():e}))):t.push(e)})),i.push(t)})),i};var c=location.search,d="debug_video_player";if(c.indexOf(d+"=0")>=0?i.removeCookie(d,{path:"/"}):c.indexOf(d+"=1")>=0||i.cookie(d)?(n=!0,r=!0,s=!0):c.indexOf(d+"=cookie")>=0&&(n=!0,r=!0,s=!0,i.cookie(d,1,{path:"/",expires:1})),n){!0===n&&function(){var t,a=e.console||{},i=o;if(n=!0,r=!0,s=!0,a.log)for(o={push:function(){var e=a.debug||a.log,t="",i="",r=arguments[0],s=r[0];n&&(l.push(r),l.length>200&&l.shift()),"error"!==s&&"warn"!==s&&"info"!==s||(a[t=s]?e=a[t]:i=t.toUpperCase()+": ",r[0]=i),r[0]="[VP] "+r[0],e.apply?e.apply(a,r):e(Array.prototype.slice.call(r))}},u("Enable video player js logging"),t=0;t<i.length;t++)o.push(i[t])}()}}(window)},5463:(e,t,a)=>{var i=a(9755);!function(e){"use strict";var t,a,n=".js-video-player-new",r=e.Phoenix||{},s=r.VideoPlayer,o=s.log;if(e.Phoenix||(e.Phoenix=r),!s||!Backbone)return;t=s.Views;var l,u,c,d,p,g,y,v,h,m,f={},P={},S="[INIT] ",w=(l=window.frameElement,u=window.parent,c=window.top,d=!1,p=!1,g=!1,y=window,l?(d=!0,p=!0,y=c!==u?c:u):u===window?d=!1:(d=!0,g=!0),{isEmbed:d,isOffsiteEmbed:g,isSameSiteEmbed:p,trackingParamsSource:y}),k=(v={},h={},function(e){var t=e.data("id"),a=e[0];if(t)return h[t]===a||(v[t]?(t=t+"-"+v[t]++,e.attr("data-id",t)):v[t]=1,h[t]=a),t}),b=function(e){var a,n=e.playerId,r=[];O(e),s.Controls.Autoplay?(o("Init autoplay control"),(a=I(e,"Autoplay",s.Controls.Autoplay))&&r.push(a)):o("Autoplay control does not exist"),r.push(T(e)),r.push(N(e)),r.push($(e)),r.push(C(e)),i.merge(r,A(e)),i.merge(r,V(e)),E(e),M(e),e.videoJSON.uvpHi5Ima&&r.push(function(e){var a;if(t.AdUtilities){try{a=new t.AdUtilities({Player:e})}catch(e){o("error","[INIT] AdUtilities failed to initialize: ",e)}return a}}(e)),P[n]=r},T=function(e){var a;try{a=new t.ApiInterfaceManager({el:e.$(".js-vid-player-holder"),Player:e})}catch(e){o("error","[INIT] failed to initialize api interface manager: ",e)}return a},C=function(e){var a;o("[INIT] Initialize Player Control Chrome");try{a=new t.ControlChrome({el:e.el,Player:e})}catch(e){o("error","[INIT] failed to initialize control chrome: ",e)}return a},I=function(e,t,i){var n;if(void 0===e.controlsEnabled[t.toLowerCase()]){try{n=new i({el:e.el,Player:e,Preferences:a}),o(S+t+" initialized"),e.controlsEnabled[t.toLowerCase()]=!n.disabled}catch(e){o("error",S+t+" failed to initialize: ",e)}return n&&"preference"===n.controlType&&!n.disabled&&a.register(n,e.playerId),n}},A=function(e){if(o("[INIT] Initialize Player Controls: ",s.Controls),s.Controls){var t=[];return i.each(s.Controls,(function(a,i){var n=I(e,a,i);n&&t.push(n)})),e.controlsInitialized=!0,e.trigger("initControlsComplete",e.controlsEnabled),t}o("[INIT] There are no controls to initialize")},E=function(e){var t=e.videoJSON,a=e.$(".js-vid-countdown"),i=Date.now(),n=1e3*parseInt(t.countdownTime,10);a.length?(!a.data("complete")&&n>0&&i<n&&(e.setStates({counting:!0}),a.on("complete",(function(){e.$("iframe").remove(),e.setStates({counting:!1}),o("[INIT] Done counting"),e.autoplay()})),a.on("almostComplete",(function(){e.$el.addClass("countdown-almost-complete")}))),o("[INIT] Countdown initialized")):o("[INIT] No countdown")},V=function(e){var a=e.$(".js-vid-menu-hit"),n=null,r=[];return a.each((function(){var s,o=i(this).closest(".js-vid-menu-set");o.length&&((s=new t.Menu({Player:e,el:o,els:{$menuHit:a}})).on("open",(function(){n&&n.close(),n=s})),s.on("close",(function(){n===s&&(n=null)})),r.push(s))})),r},$=function(e){var a;if(t.Progress){try{a=new t.Progress({el:e.el,Player:e})}catch(e){o("error","[INIT] Progress failed to initialize: ",e)}return a}},M=function(e){e.$el.hasClass("av-mobile-player")||e.$(".js-vid-tooltip").tooltip({animation:!1,delay:0,template:'<div class="av-vid-tooltip" role="tooltip"><div class="av-vid-tooltip-arrow tooltip-arrow"></div><div class="av-vid-tooltip-inner tooltip-inner"></div></div>'})},O=(m=function(e){var t=e.id,a=e.watchedCookieName,n=e.watchedCookieDays,r=function(e){var t,a,n=e.watchedCookieName;if(n)return(t=i.cookie(n))&&(a=JSON.parse(t)),a||(a=[]),a}(e);void 0!==r&&(i.inArray(t,r)<0&&r.push(t),i.cookie(a,JSON.stringify(r),{path:"/",expires:n}))},function(e){e.on("beforePlay",(function(){var t=e.videoJSON;!e.states.played&&t.id&&(o("[INIT] video has not played > log view"),function(e){var t=!!i("#VideoDisableTracking").attr("content"),a=e.id;o("[INIT] Disable Tracking? ",t),!t&&a&&(i.ajax({url:"/api/video/played/"+a+"/",type:"GET",success:function(e){0===e.success?o("[INIT] Error logging view"):1===e.success&&o("[INIT] View logged successfully")}}),m(e))}(t))}))}),N=function(e){var a,i=e.$el.closest("#kubrick-lead");if(i.length)try{a=new t.Kubrick({el:i,Player:e})}catch(e){o("error","[INIT] Kubrick failed to initialize: ",e)}return a},j=function(e){var n,r,s,l;if(s=k(e))if(l=e.data("video"),o("[INIT] videoJSON:\n",i.extend({},l)),l){n=function(e){var a;try{a=new t.AgeGate({el:e.find(".js-vid-age-gate")}),o("[INIT] AgeGate initialized: ",a)}catch(e){o("error","[INIT] AgeGate failed to initialize: ",e)}return a}(e);try{if(r=new t.Player({el:e,els:{$playerContainer:e.find(".js-vid-max-width")},playerId:s,videoJSON:l,AgeGate:n,Preferences:a}),e.on("remove",(function(){r.stop(),r.disable()})),r.states.disabled)return void o("[INIT] Player disabled");o("[INIT] Core player initialized")}catch(e){o("error","[INIT] Core player failed to initialize: ",e)}if(r)return o("vvvvvvvvvv VIDEO PLAYER COMPONENTS vvvvvvvvvv"),b(r),o("^^^^^^^^^^ VIDEO PLAYER COMPONENTS ^^^^^^^^^^"),r}else o("error","[INIT] Video JSON missing for: ",e);else o("error","[INIT] $videoPlayer is missing playerId")};s.getInstance=function(e){return f[e]},s.destroyInstance=function(e){return void 0!==f[e]&&(delete f[e],!0)},s.getAllInstances=function(){return f},s.hasInstance=function(e){return!!f[e]},s.removeInstance=function(e){var t=f[e],a=P[e];try{t.disable(),t.$el.remove(),i.each(a,(function(){this.off(),this.stopListening()})),delete f[e],delete P[e]}catch(e){return o("error",e),!1}return!0},s.classnames={hide:"hide-element"},s.convertTime=function(e){var t=0,a=0,i=0,n="",r="",s="";return e||(e=0),(e<0||isNaN(e))&&(e=0),0!==e&&(t=Math.floor(e%60),a=Math.floor(e/60%60),i=Math.floor(e/3600)),t<10&&(n="0"),a<10&&(r="0"),s=r+a.toString()+":"+n+t.toString(),e>=3600&&(s=i.toString()+":"+s),s},s.ratioToPercentString=function(e){var t=(100*e).toFixed(2),a=t.indexOf(".00");return a>0&&(t=t.substr(0,a)),t+"%"},s.getEventInContainerRatio=function(e,t,a){if(e&&t){a||(a="horizontal");var i,n,r,s=t.offset();return"horizontal"===a?(i=t.width(),r=(n=e.pageX||e.originalEvent.touches.length>0?e.pageX||e.originalEvent.touches[0].pageX:e.originalEvent.changedTouches[0].pageX)-s.left):(i=t.height(),s.bottom=i+s.top,n=e.pageY||e.originalEvent.touches[0].pageY,r=s.bottom-n),r<0?r=0:r>i&&(r=i),r/i}},s.showSuccessMessage=function(e){r.Ui&&r.Ui.showSuccessMessage&&r.Ui.showSuccessMessage(e)},s.query=function(e){e=e.replace(/[*+?^$.\[\]{}()|\\\/]/g,"\\$&");var t=location.search.match(new RegExp("[?&]"+e+"=([^&]+)(&|$)"));return t&&decodeURIComponent(t[1].replace(/\+/g," "))},s.getComponents=function(e,t){if(!e.els){var a={};i.each(t,(function(t,i){a[t]=e.$(i)})),e.els=a}},s.getTrackingParams=function(){const{utag_data:e}=w.trackingParamsSource;let t;return t=e?{articleId:e.articleId,articleTitle:e.articleTitle,articleType:e.articleType,authorIDs:e.articleAuthorId,brand:e.brand,collectionId:e.collectionName,deviceType:e.deviceType,pageType:e.pageType,pageUrl:w.isEmbed?document.referrer:document.location.href,pageViewGuid:e.pageViewGuid,productGenre:e.productGenre,productId:e.productId,productTitle:e.productName,showName:e.showName,siteSection:e.siteSection,siteHier:e.siteHier,subCollection:e.subCollectionName,test:e._test,userId:e.userId,userState:e.userState,userType:e.userType}:{},o("contextTrackingParams: ",t),t},s.allowTracking=!0;var D=function(e){e||(e=i(n)),!e||e.length<1||e.each((function(){var e,t,n,r,l=i(this),u=k(l),c=!1,d=!1;s.hasInstance(u)||(o("========== INITIALIZE VIDEO PLAYER ["+u+"] =========="),(e=j(l))&&(!function(e){if(e)try{f[e.playerId]=e}catch(e){o("error",e)}}(e),e&&e.ApiInterfaceManager&&(t=function(){d&&c&&(a.load(u),e.trigger("initComplete"),e.$el.data("playerInitialized",!0),e.$el.trigger("playerInitialized"),o("========== VIDEO PLAYER INITIALIZED ["+u+"] =========="))},r=function(){c=!0,t()},n=function(){d=!0,t()},e.controlsInitialized?n():e.on("initControlsComplete",(function(){n()})),e.ApiInterfaceManager.ready?r():e.ApiInterfaceManager.once("ready",r))))}))};const x=[],{PhoenixLoader:L}=w.trackingParamsSource;L&&L.gdprConsentCallback&&x.push(new Promise((e=>{L.gdprConsentCallback(!0,(function(){o("[INIT] [ROADBLOCKS][One Trust] performance consent allowed"),e()}),"performance",(function(){o("[INIT] [ROADBLOCKS][One Trust] performance consent disabled"),s.allowTracking=!1,e()}))}))),Promise.all(x).then((function(){var e,r,l;o("========== INITIALIZE VIDEO PLAYER APP =========="),l=s.ApiInterfaces,r||(r=i(".js-vid-playback")),r.each((function(){var e=i(this),t=e.data("player");l[t]||e.remove()})),a=new t.Preferences,e=w.isSameSiteEmbed&&w.trackingParamsSource.$?w.trackingParamsSource.$(w.trackingParamsSource.document):i(document),D(),w.isEmbed||(document.addEventListener("ajaxContentLoaded",(function(){D()})),e.on("ajaxPlayerLoaded",n,(function(){D(i(this))})))}))}(window)},200:(e,t,a)=>{var i=a(9755);!function(e){"use strict";var t,a=e.Phoenix;a||(e.Phoenix=a={}),(t=a.VideoPlayer=a.VideoPlayer||{}).Models=t.Models||{};var n={cookie:!1,server:!1,takeLargestValue:!0,saveTimeExpires:5,minSaveThreshold:5,saveThrottleLocal:1,saveThrottleServer:30};t.Models.VideoStatus=Backbone.Model.extend({options:null,timestamps:null,value:null,id:null,api:null,settingName:null,videoJSON:null,savePosition:null,fetchCalls:null,saveCalls:null,deleteCalls:null,hasMarkedWatched:!1,initialize:function(e){var t=this;if(void 0===e||!e.videoJSON||e.settingName)throw"Video Status Exception: Not enough arguments";t.videoJSON=e.videoJSON,t.videoJSON&&(t.options=i.extend({},n),t.timestamps={},t.fetchCalls=[],t.saveCalls=[],t.deleteCalls=[],t.id=t.videoJSON.id,t.videoJSON.savePosition?(t.savePosition=t.videoJSON.savePosition,t.api=t.savePosition.api,t.settingName=t.savePosition.cookieName):t.settingName="uvp:savedPosition:"+t.videoJSON.guid,i.extend(t.options,e.options),t.options.cookie&&(t.fetchCalls.push(_.bind(t.fetchCookie,t)),t.saveCalls.push(_.bind(t.saveCookie,t)),t.deleteCalls.push(_.bind(t.deleteCookie,t))),t.options.server&&t.api&&(t.fetchCalls.push(_.bind(t.fetchServer,t)),t.saveCalls.push(_.bind(t.saveServer,t)),t.deleteCalls.push(_.bind(t.deleteServer,t))))},fetch:function(e){var a=this,i=(e=e||{}).success||function(e){t.log("Fetched:"+a.settingName+":"+e)};a.value=0;var n=0,r=a.fetchCalls.length,s=function(e){try{e=parseFloat(e)}catch(t){e=0}(!a.options.takeLargestValue||a.value<e)&&(a.value=e),++n===r&&i(a.value)};_.each(a.fetchCalls,(function(e){e({success:s})}))},fetchCookie:function(e){var t,a,n;e.success((t=this.settingName,a=i.cookie(t),n=null,Modernizr.localstorage&&(n=localStorage.getItem(t)),n||a))},fetchServer:function(e){e.success(this.savePosition.savedTime)},save:function(e,a){var i=this;e<i.options.minSaveThreshold||((a=a||{}).success=a.success||function(){t.log("Saved:"+i.settingName+":"+e)},a.force=!!a.force,_.each(i.saveCalls,(function(t){t(e,a)})),i.value=e)},markWatched:function(e){var t=this;e=e||{},t.api&&t.api.markWatched&&!t.hasMarkedWatched&&(t.hasMarkedWatched=!0,i.ajax({type:"POST",url:t.api.markWatched,data:{video_id:t.id},success:function(){t.hasMarkedWatched=!0,e.success&&e.success()}}))},saveCookie:function(e,t){var a=this,r=t.force?1:a.options.saveThrottleLocal;a.throttleSave("cookie",r,(function(){!function(e,t){Modernizr.localstorage?localStorage.setItem(e,t):i.cookie(e,t,{expires:n.saveTimeExpires,path:"/"})}(a.settingName,e),t.success&&t.success()}))},saveServer:function(e,t){var a=this;if(a.api){var n=t.force?1:a.options.saveThrottleServer;a.throttleSave("server",n,(function(){i.ajax({type:"POST",url:a.api.setSavedTime,data:{video_id:a.id,time_to_save:e},success:function(){t.success&&t.success()}})}))}},throttleSave:function(e,t,a){var i=this,n=(new Date).getTime();i.timestamps[e]||(i.timestamps[e]=n),i.timestamps[e]+1e3*t<n&&(a(),i.timestamps[e]=n)},delete:function(){_.each(this.deleteCalls,(function(e){e()}))},deleteCookie:function(){var e;e=this.settingName,i.removeCookie(e),Modernizr.localstorage&&localStorage.removeItem(e)},deleteServer:function(){}})}(window)},2587:()=>{!function(e){"use strict";var t=e.Phoenix;t||(e.Phoenix=t={});var a=t.VideoPlayer=t.VideoPlayer||{},i=a.Views=a.Views||{},n=a.log;i.AdUtilities=Backbone.View.extend({Player:null,initialize:function(e){var t=this;t.Player=e.Player,n("[AD CALLS] AdUtilities"),t.Player.on("adStart",(function(){t.Player.setStates({adPlaying:!0,adPlayed:!0,isSeekDisabled:!0})})),t.Player.on("contentStart",(function(){t.Player.setStates({adPlaying:!1,contentStarted:!0,isSeekDisabled:!1})}))}})}(window)},5121:(e,t,a)=>{var i=a(9755);!function(e){"use strict";var t,a,n=e.Phoenix;n||(e.Phoenix=n={}),a=(t=n.VideoPlayer=n.VideoPlayer||{}).Views=t.Views||{};var r=t.log,s={$ageDate:".js-vid-age-gate-date",$ageDay:".js-vid-age-gate-day",$ageMonth:".js-vid-age-gate-month",$ageYear:".js-vid-age-gate-year"},o="[AGE GATE] ";a.AgeGate=Backbone.View.extend({els:null,initialize:function(e){t.getComponents(this,s)},isAgeGated:function(e){var t,a,n=this,s=n.els,l=n.$el,u=s.$ageYear,c=e.videoJSON,d=c.ageGateCookieName,p=!1;return r(o+"Checking..."),!0===function(e,t){var a=e.$el,i=t.contentRating,n=!0;return a&&i&&!0!==e.isOfAge(t)?r(o+"has gate"):(r(o+"no gate"),n=!1),n}(n,c)&&(!1===n.isOfAge(c)?p=!0:!1===e.states.showAgeGate?p="prompt":(a=u.val(),r(o+"Year selected: "+a),"year"===a?(r("warning",o+"missing year value"),p="Please select a year value to validate your age!"):(t=[a,s.$ageMonth.val(),s.$ageDay.val()].join("-"),d&&!isNaN(Date.parse(t))&&i.cookie(d,t,{path:"/",expires:2e3}),n.isOfAge(c,t)||(r(o+"User is not old enough"),p=!0)))),!1===p&&(r(o+"User is old enough"),e.setStates({hasGate:!1,showAgeGate:!1}),l&&l.length>0&&(l.remove(),delete s.$ageGate)),!0===p?n.gate(e):"prompt"===p?function(e){e&&(e.trigger("promptAgeGate"),e.setStates({showAgeGate:!0}))}(e):"string"==typeof p&&alert(p),p},isOfAge:function(e,t){var a,n=this.els,s=e.contentRating;if(s&&0!==n.$ageDate.length){if(t||(t=i.cookie(e.ageGateCookieName)),t){var l,u=new Date,c=t.split("-");try{l=new Date(c[0],c[1],c[2]),isNaN(l.getTime())&&(l=u)}catch(e){l=u}a=Math.floor((u-l)/31536e6)>=s}}else a=!0;return r(o+"isOfAge? ",a),a},gate:function(e){e&&(r(o+"Gate Video Player"),e.setStates({gated:!0}),e.disable())}})}(window)},8540:(e,t,a)=>{var i=a(9755);!function(e){"use strict";var t,a,n=e.Phoenix;n||(e.Phoenix=n={}),a=(t=n.VideoPlayer=n.VideoPlayer||{}).Views=t.Views||{};t.log;a.AbstractApiInterface=Backbone.View.extend({name:"",initialized:!1,playerReady:!1,contentLoading:!1,ApiInterfaceManager:null,initialize:function(e){var t=this;t.states&&"object"==typeof t.states&&(t.states=i.extend({},t.states))},initApi:function(){},checkHasSource:function(){return!0},checkContentExists:function(e){"function"==typeof e&&e(!0)},configureAutoplay:function(){},checkCanAutoplay:function(){var e=this.ApiInterfaceManager.getVideoJson(),a=t.query("autoplay"),i=!1;return(e.autoplay||"1"===a||"true"===a)&&(i=!0),i},play:function(){},pause:function(){},resume:function(){},seekTo:function(){},seekToLive:function(){},stop:function(){},setVolume:function(e){},mute:function(){},unMute:function(){},showDiagnosticWindow:function(){},fullscreen:function(e){},getCurrentTime:function(){return 0},getDuration:function(){return 0},getVolume:function(){return 0},disable:function(){},userGesture:function(){}})}(window)},3137:()=>{!function(e){"use strict";var t,a,i,n,r=e.Phoenix;r||(e.Phoenix=r={}),t=r.VideoPlayer=r.VideoPlayer||{},n=(a=t.Views=t.Views||{}).AbstractApiInterface,i=t.ApiInterfaces=t.ApiInterfaces||{};var s=t.log,o=(JSON.stringify,"[API-CHROMECAST]");i.chromecast=n.extend({name:"chromecast",states:{ready:!1,playing:!1,resourceLoaded:!1,seekToLive:!1},Media:null,Player:null,Controller:null,timingInterval:null,videoJSON:null,ApiInterfaceManager:null,initialize:function(e){var t=this;t.ApiInterfaceManager=e.ApiInterfaceManager,t.videoJSON=e.videoJSON;a.AbstractApiInterface.prototype.initialize.call(t,e),t.$el},setMedia:function(e){this.Media=e},setPlayer:function(e){var t=this;t.Player=e,t.timingInterval=setInterval(_.bind(t.mediaStatusUpdate,t),1e3)},setController:function(e){this.Controller=e},mediaStatusUpdate:function(){var e=this,t=e.getCurrentTime();t>1&&e.states.seekToLive&&(e.states.seekToLive=!1,e.seekToLive(),e.ApiInterfaceManager.trigger("onContentStart")),e.ApiInterfaceManager.trigger("onVideoProgress",{currentTime:t})},play:function(e){var t=this;s(o+"play video"),t.Player.isPaused&&t.Controller.playOrPause(),!t.states.playing&&t.videoJSON.isLiveStream?t.states.seekToLive=!0:t.ApiInterfaceManager.trigger("onContentStart"),t.states.playing=!0},resume:function(){s(o+"resume video"),this.play()},pause:function(){s(o+"pause video"),this.Player.isPaused||this.Controller.playOrPause()},stop:function(){var e=this;s(o+"stop casting video"),e.states.playing=!1,e.Controller.stop(),clearInterval(e.timingInterval)},seekTo:function(e){this.ApiInterfaceManager.trigger("onVideoProgress",{currentTime:e}),this.Player.currentTime=e,this.Controller.seek()},seekToLive:function(){this.videoJSON.isLiveStream&&(this.Player.currentTime=999999,this.Controller.seek())},setVolume:function(e){s(o+"set volume to "+e),this.Player.volumeLevel=e,this.Controller.setVolumeLevel()},mute:function(){s(o+"mute"),this.Player.isMuted||this.Controller.muteOrUnmute()},unMute:function(){s(o+"unMute"),this.Player.isMuted&&this.Controller.muteOrUnmute()},getCurrentTime:function(){return this.Player.currentTime},getDuration:function(){return this.Player.duration}})}(window)},4368:()=>{"use strict";class e{constructor(e,t){this.jwFandomPlayerClass="jw-player-fandom",this.videoPlayerContainerElement=e,this.injectJwPlayer(t)}async injectJwPlayer(e){const t=this.videoPlayerContainerElement.dataset.jwContextName,a=this.videoPlayerContainerElement.dataset.jwMediaId,i=this.isPlayingOnGiantbomb()?this.videoPlayerContainerElement.dataset.jwPlayerUrl:void 0,n=this.isPlayingOnGiantbomb()?this.videoPlayerContainerElement.dataset.jwVideoToken:void 0,r="1"===this.videoPlayerContainerElement.dataset.hasYoutube,s=this.videoPlayerContainerElement.dataset.youtubeIconPath,o="1"===this.videoPlayerContainerElement.dataset.userHasAds;a&&(await this.injectScriptTag(),window.loadPlayer?(await window.loadPlayer({contextName:t,mediaId:a,playerUrl:i,embedHtmlElement:e,autoIncrementJwPlayerContainerId:!0,autoPlay:!1,jwtSignedContentAuth:n,hasAds:o}),this.videoPlayerContainerElement.classList.add(this.jwFandomPlayerClass),this.isPlayingOnGiantbomb()&&r&&this.ensurePlayerKeyIsSet().then((()=>{window.aeJWPlayerKey.addButton(s,"Back to YT player",this.switchToYoutubePlayer.bind(this),a)}))):console.error("window.loadPlayer is not defined"))}pauseVideo(){this.ensurePlayerKeyIsSet().then((()=>{window.aeJWPlayerKey.pause()}))}playVideo(){this.ensurePlayerKeyIsSet().then((()=>{window.aeJWPlayerKey.play()}))}switchToYoutubePlayer(){this.videoPlayerContainerElement.querySelector(".js-vid-playback.js-vid-youtube").click()}ensurePlayerKeyIsSet(){return new Promise(((e,t)=>{const a=()=>{if(window.aeJWPlayerKey)return e();setTimeout(a,1e3)};a()}))}isPlayingOnGiantbomb(){return"giantbomb"===this.videoPlayerContainerElement.dataset.jwContextName}injectScriptTag(){return new Promise((e=>{if(window.loadPlayer)return void e();const t=document.createElement("script");t.src="https://static.wikia.nocookie.net/silversurfer/video/prod/standalone-dist/standAlone_RV_VideoPlayer.js",t.async=!0,t.onload=()=>{e()},document.body.appendChild(t)}))}}!function(t){const a=t.Phoenix;let i,n,r,s,o;a||(t.Phoenix=a={}),i=a.VideoPlayer=a.VideoPlayer||{},n=i.Views=i.Views||{},s=n.AbstractApiInterface,r=i.ApiInterfaces=i.ApiInterfaces||{},o=i.log;const l="[API-JWPLAYER]";r.jwplayer=s.extend({name:"jwplayer",states:{playing:!1,ready:!1},jwplayerInstance:null,videoPlayersContainerElement:null,ApiInterfaceManager:null,initialize:function(t){n.AbstractApiInterface.prototype.initialize.call(self,t);const{videoPlayersContainerElement:a}=t;this.videoPlayersContainerElement=a,this.ApiInterfaceManager=t.ApiInterfaceManager,o(`${l} initialize jwplayer`),this.jwplayerInstance=new e(a,this.$el[0]),o(`${l} jwplayer initialized`),this.ApiInterfaceManager.ready=!0},play:function(){o(`${l} play video`),this.jwplayerInstance.playVideo(),this.videoPlayersContainerElement?.closest(".js-episode-topslot-image")?.querySelector(".js-play-show-episode-video")?.classList?.add("hide-element-important")},pause:function(){o(`${l} pause video`),this.jwplayerInstance.pauseVideo()},disable:function(){this.$el[0].innerHTML=""}})}(window)},3428:(e,t,a)=>{var i=a(9755);!function(e){"use strict";var t,a,n,r,s=e.Phoenix,o=i(document),l=e.uvpjs;s||(e.Phoenix=s={}),t=s.VideoPlayer=s.VideoPlayer||{},r=(a=t.Views=t.Views||{}).AbstractApiInterface,n=t.ApiInterfaces=t.ApiInterfaces||{};var u=t.log,c="[API-UVPJS] ",d=!1,p={};const g="1"===document.getElementById("js-video-header-bidding-meta")?.content;var y=function(e){const a=e.PlayerApiManager=l.getVideoManager(),i=e.ApiInterfaceManager,n=i.getVideoJson(),{allowTracking:r}=t;e.sessionOptions.uvpc.modules.forEach((function(t,a){"SiteCatalyst"==t.name&&(e.sessionOptions.uvpc.modules[a].enabled=r),"ComScore_ss"==t.name&&(e.sessionOptions.uvpc.modules[a].enabled=r),"NielsenTracking"==t.name&&(e.sessionOptions.uvpc.modules[a].enabled=r),"MuxQOSPluginJS"==t.name&&(e.sessionOptions.uvpc.modules[a].enabled=r)})),g&&window.waitForBidBarrel((()=>{window.BidBarrel.auction([["video-rectangle",parseInt(n.id),{},{video:{h:"483v",mimes:["video/H264","video/webm","video/mp4"]}}]])})),window.uvpjs.Configuration.hostname=e.sessionOptions.uvpjsHostname,u(c+"Initialize cbsiVideoManager",e.sessionOptions),a.initialize(e.sessionOptions,(function(t){u(c+"cbsiVideoManager initialized"),t?((p=t).supportsUnmutedAutoplay?i.autoplayTypeAllowed=i.autoplayTypes.normal:p.supportsMutedAutoplay?i.autoplayTypeAllowed=i.autoplayTypes.muted:i.autoplayTypeAllowed=i.autoplayTypes.none,u(c+"ApiInterfaceManager.autoplayTypeAllowed POST logic"+i.autoplayTypeAllowed),function(e){var t=e.PlayerApiManager,a=e.ApiInterfaceManager,i=h(e);u(c+"Tracking options: ",JSON.stringify(i)),e.configureAutoPlay();var n={};n=1!=e.states.autoplay||a.getPlayerState("autoplayUserDisabled")?{enableMutedAutoplay:!1,enableUnmutedAutoplay:!1}:{enableMutedAutoplay:e.states.autoplayType==a.autoplayTypes.muted,enableUnmutedAutoplay:e.states.autoplayType==a.autoplayTypes.normal},u(c+"enableOptions",n),t.createVideoPlayer(e.containerId,(function(t){var n=t.getAutoplayInfo();u(c+"Video Control Interface (VCI) ready"),u(n),t.setPageContextMetadata(i),e.PlayerApi=t,v(e),e.states.ready=!0,e.trigger("ready"),a.ready=!0,a.trigger("ready")}),n)}(e),o.trigger("phoenix_cbsi_video_manager_setup_done")):u(c+"ERROR: cbsiVideoManager.initialize() systemInfo missing. Aborting build.")}),(function(e){u(c+"cbsiVideoManager init error",e)}))},v=function(t){var a=t.ApiInterfaceManager,i=t.PlayerApi,n=t.containerId,r="."+n+".phoenix",s=e.uvpjs,o=function(e){e&&n===e.target&&(e.type==s.EventType.FIRST_GESTURE&&u(c+"IMPORTANT: First gesture event heard from UVP"),e.type!==s.EventType.VIDEO_PROGRESS&&u(c+e.type+" eventData: ",JSON.stringify(e)),a.trigger(e.type,e.payload))};u(c+"Init VCI event listeners"),i.addEventListener(s.EventType.AD_BLOCKED+r,o),i.addEventListener(s.EventType.AD_END+r,o),i.addEventListener(s.EventType.AD_SLOT_END+r,o),i.addEventListener(s.EventType.AD_START+r,o),i.addEventListener(s.EventType.AD_SLOT_START+r,o),i.addEventListener(s.EventType.CONTENT_DATA_LOADED+r,o),i.addEventListener(s.EventType.CONTENT_START+r,o),i.addEventListener(s.EventType.CONTENT_END+r,o),i.addEventListener(s.EventType.NO_AD_CONTENT+r,o),i.addEventListener(s.EventType.RESOURCE_START+r,o),i.addEventListener(s.EventType.VIDEO_DONE+r,o),i.addEventListener(s.EventType.VIDEO_ERROR+r,o),i.addEventListener(s.EventType.PLAYER_START_ERROR+r,o),i.addEventListener(s.EventType.VIDEO_START_ERROR+r,o),i.addEventListener(s.EventType.VIDEO_PLAYBACK_ERROR+r,o),i.addEventListener(s.EventType.AD_ERROR+r,o),i.addEventListener(s.EventType.VIDEO_STATE_CHANGE+r,o),i.addEventListener(s.EventType.VIDEO_LOADING+r,o),i.addEventListener(s.EventType.VIDEO_PROGRESS+r,o),i.addEventListener(s.EventType.VIDEO_DURATION_CHANGE+r,o),i.addEventListener(s.EventType.DIAGNOSTIC_WINDOW_CLOSE_BUTTON+r,o),i.addEventListener(s.EventType.FIRST_GESTURE+r,o),i.addEventListener(s.EventType.CONTROL_UNMUTE+r,o)};const h=function(e){const a=e.ApiInterfaceManager,i=a.getVideoJson(),n=t.getTrackingParams(),r={articleId:n.articleId,articleTitle:n.articleTitle,articleType:n.articleType,authorIDs:n.authorIDs,blockStatus:n.blockStatus,brand:n.brand,collectionId:n.collectionId,deviceType:n.deviceType,pageType:n.pageType,pageUrl:n.pageUrl,pageViewGuid:n.pageViewGuid,premiumContent:i.premium.toString(),productGenre:n.productGenre,productId:n.productId,productTitle:n.productTitle,showName:n.showName,siteCode:i.trackingSiteCode,sitePrimaryRsid:i.trackingPrimaryId,siteRsids:i.trackingAccount,siteSection:n.siteSection,siteHier:n.siteHier,siteType:i.siteType,subCollection:n.subCollection,test:n.test,userId:n.userId,userState:n.userState,userType:n.userType,videoAutoPlay:i.autoplay&&!a.getPlayerState("autoplayUserDisabled")?"on":"off",videoAssetSource:i.videoAssetSource};return k(e)&&(i.isDevice&&i.cuePoints?r.videoAdServerName="dai_sdk":r.videoAdServerName="ima"),u(c+"pageContextData",r),e.pageContextData=r,r};var m,f,P,S=(m=i("<div />"),f=i('<div class="js-vid-ima-ad av-video-player-hold av-ima-ad" />'),function(e){var t=e.$el,a=t.attr("id");t.append(m.clone().attr("id","content_"+a),f.clone().attr("id","ad_"+a))});P=c+"[AD CALL] ";const w=function(e,t){const a=e.ApiInterfaceManager,i=a.getVideoUrl(),n=a.getVideoJson();let r={assetURL:i,cmsRefGuid:n.guid,duration:n.lengthSeconds,mediaId:n.id,isLive:n.isLiveStream,type:l.mediaCapabilities.RP_URL,videoTitle:decodeURIComponent(n.title)};return t||(r.vidContId=e.containerId),r};var k=function(e){return e.ApiInterfaceManager.shouldPlayAd()},b=function(e,t){var a=e.PlayerApi;setTimeout((function(){u(c+"Load new resource(s) and play"),a.loadAndPlayResource(w(e)),e.states.resourceLoaded=!0}),0)},T=function(e,t){u(c+"loadOrWatch <<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<");var a=e.PlayerApi;null!==a?a.onPreviewButton((function(){if(u(c+"onPreviewButton: "+e.states.autoplayType),e.states.autoplayType==e.autoplayTypes.muted){u(c+"autoplay type is muted, making watcher");var i=e.ApiInterfaceManager.$player,n=scrollMonitor.create(i),r=function(){e.$el.off(".watcher"),i.off(".watcher"),n.destroy(),u(c+"Destroying Watcher")};n.on("enterViewport",(function(){a.getCurrentPlaybackState().playbackStarted&&!t?(u(c+"entering view port and playing"),e.resume()):b(e)})),n.on("exitViewport",(function(){a.getCurrentPlaybackState().playbackStarted&&(u(c+"leaving view port and pausing"),e.pause())})),e.$el.one("click.watcher touchend.watcher",r),i.one("click.watcher touchend.watcher",r)}else u(c+"onPreviewButton: LOAD AND PLAY"),b(e)})):setTimeout((function(){T(e,t)}),500)};n.uvpjs=r.extend({name:"uvpjs",states:{ready:!1,resourceLoaded:!1,shouldPlayAd:!1,autoplayType:"none"},allowAutoplay:!1,autoplayTypes:{normal:"normal",muted:"muted",none:"none"},containerId:null,firstGesture:0,sessionOptions:null,pageContextData:null,onVideoPlaybackErrorHandler:null,ApiInterfaceManager:null,PlayerApi:null,PlayerApiManager:null,initialize:function(e){var t=this,n=e.videoJSON;a.AbstractApiInterface.prototype.initialize.call(t,e),t.ApiInterfaceManager=e.ApiInterfaceManager,t.containerId=t.$el.attr("id"),u(c+"initialize, container ID: "+t.containerId),S(t),function(e,t){if(!e.sessionOptions){var a=!!t.cuePoints,i=t.isDevice?"mobile":"desktop",n={uvpjsHostname:t.uvpjsHostname,capLevelToPlayerSize:!0,cms:t.cms,partner:t.partner,playsInline:!0,skin:!1,usesIMA:!("mobile"===i&&a||!t.uvpHi5Ima),uvpc:{modules:t.tracking},allowConcurrentPlayback:!1};t.userId>0&&(n.userId=t.userId),"mobile"===i&&n.uvpc.modules.push({category:"internal",enabled:!0,name:"VideoPlaybackSettings",params:[{name:"forceHlsjs",value:!0}]}),e.sessionOptions=n}}(t,n),n.uvpHi5Ima?d?y(t):(t.once("imaSdkLoaded",(function(){y(t)})),function(e){if(d)return;var t,a,n,r,s=e.ApiInterfaceManager.getVideoJson(),o=!!s.cuePoints;let l,p;"mobile"==(s.isDevice?"mobile":"desktop")&&o?(l="//imasdk.googleapis.com/js/sdkloader/ima3_dai.js",p="//imasdk.googleapis.com/js/sdkloader/ima3_dai_debug.js"):(l="//imasdk.googleapis.com/js/sdkloader/ima3.js",p="//imasdk.googleapis.com/js/sdkloader/ima3_debug.js"),n="IMA script",r=l,t?t.always((function(){e.trigger("imaSdkLoaded")})):(u(c+"Load IMA js"),window.addEventListener("error",a=function(e){"SCRIPT"===e.target.tagName&&(e.target.src.includes(l)||e.target.src.includes(p))&&(window.removeEventListener("error",a),t.abort())},!0),t=i.ajax({url:r,dataType:"script",cache:!0,complete:[function(){u(c+"IMA js LOADED: "+r),d=!0,e.trigger("imaSdkLoaded")}],error:function(){u(c+n+" failed to load")},success:function(){u(c+n+" successfully loaded")}}))}(t)):y(t)},checkCanAutoplay:function(){return this.allowAutoplay},configureAutoPlay:function(){const e=this;let a=!1;const n=e.ApiInterfaceManager.getVideoJson(),r=e.ApiInterfaceManager.autoplayTypeAllowed,s=e.ApiInterfaceManager.autoplayTypes,o=t.query("autoplay"),l=t.query("mute");let d=!1;const p=document.querySelector('[data-sticky-active="true"]');(n.autoplay||"1"===o||"true"===o)&&(d=!0),p&&(d=!1),!n.startMuted||r!==s.muted&&r!==s.normal?d&&r===s.normal?(a=!0,e.states.autoplay=!0,n.startMuted=!1,e.states.autoplayType=s.normal):d&&r===s.muted?(a=!0,e.states.autoplay=!0,n.startMuted=!0,e.states.autoplayType=s.muted):(e.states.autoplay=!1,n.startMuted=!1,e.states.autoplayType=s.none,u(c+" Can NOT play unmuted nor muted")):(a=!0,e.states.autoplay=!0,e.states.autoplayType=s.muted),"1"!==l&&"true"!==l||(n.startMuted=!0,i(".js-vid-unmute-autoplay").remove()),u(c+"configureAutoplay siteRequestsAutoplay:"+d+" | autoplayType: "+e.states.autoplayType+" | canAutoPlay"+a),e.allowAutoplay=d&&a},play:function(e){var t=this;t.ApiInterfaceManager.isDisabled()||(e||!t.states.resourceLoaded?(u(c+"load resource and play video"),T(t,e)):(u(c+"play video"),t.PlayerApi.playVideo()))},pause:function(){var e=this;e.ApiInterfaceManager.isDisabled()||e.states.resourceLoaded&&(u(c+"pause video"),e.PlayerApi.pauseVideo())},resume:function(){var e=this;e.ApiInterfaceManager.isDisabled()||(e.states.resourceLoaded?(u(c+"resume video"),e.PlayerApi.playVideo()):e.play())},seekTo:function(e){this.states.resourceLoaded&&(u(c+"seek"),this.PlayerApi.seekTo(e))},seekToLive:function(){var e=this;e.states.resourceLoaded&&(u(c+"seek to live"),e.seekTo(e.getDuration()-1),e.play())},stop:function(e){u(c+"stop video"),this.PlayerApi.stopVideo(),e&&this.PlayerApi.destroyPlaylist()},setVolume:function(e){var t=this;!0===t.ApiInterfaceManager.getVideoJson().autoplay&&t.ApiInterfaceManager.autoplayTypeAllowed==t.ApiInterfaceManager.autoplayTypes.muted?t.firstGesture>=1&&(u(c+"NEW firstGesture set volume to "+e+" | "+t.firstGesture),t.PlayerApi.setVolume(e)):t.PlayerApi.setVolume(e)},mute:function(){u(c+"mute"),this.PlayerApi.mute()},unMute:function(){var e=this;!0===e.ApiInterfaceManager.getVideoJson().autoplay&&e.ApiInterfaceManager.autoplayTypeAllowed==e.ApiInterfaceManager.autoplayTypes.muted?1===e.firstGesture?(u(c+"unMute via user gesture | gesture === 1"),e.PlayerApi.unMute(),e.PlayerApi.handleFirstGesture(),e.firstGesture++):e.firstGesture>1&&(u(c+"unMute() | gesture > 1 "),e.PlayerApi.unMute()):(u(c+"unMute() NORMAL"),e.PlayerApi.unMute())},userGesture:function(){u(c+"uvpjs.js userGesture: "+this.firstGesture),this.firstGesture=1},showDiagnosticWindow:function(){u(c+"show diagnostics"),this.PlayerApi.showDiagnosticWindow()},fullscreen:function(e){u(c+"fullscreen"),this.PlayerApi.fullscreen(e)},getCurrentTime:function(){var e=this.PlayerApi;return e?e.getCurrentPlaybackState().currentTime:0},getDuration:function(){var e=this.PlayerApi;return e?e.getCurrentPlaybackState().duration:0},getVolume:function(){var e=this.PlayerApi;return e?e.getVolume():0},disable:function(){var e=this,t=e.PlayerApi,a=e.PlayerApiManager;t&&a&&a.destroyVideoPlayer(e.containerId)}})}(window)},7122:(e,t,a)=>{var i=a(9755);!function(e){"use strict";var t,a,n,r,s=e.Phoenix;s||(e.Phoenix=s={}),t=s.VideoPlayer=s.VideoPlayer||{},r=(a=t.Views=t.Views||{}).AbstractApiInterface,n=t.ApiInterfaces=t.ApiInterfaces||{};var o=t.log,l=(JSON.stringify,function(e,t){var a=e.ApiInterfaceManager,i=e.PlayerApi;clearInterval(e.progressTimer),t&&(e.progressTimer=setInterval((function(){var e={};i&&i.getCurrentTime&&(e.currentTime=i.getCurrentTime(),a.trigger("onVideoProgress",e))}),1e3))}),u=function(e,t){e.states.loaded?t&&t(e.PlayerApi):(e.pendingCallbacks.push(t),e.states.loading||function(e){if(!e.states.loaded&&!e.states.loading){if(void 0===window.onYouTubeIframeAPIReady){var t=document.createElement("script");t.src="https://www.youtube.com/iframe_api";var a,n=document.getElementsByTagName("script")[0];n.parentNode.insertBefore(t,n),window.onYouTubeIframeAPIReady=function(){a=new YT.Player(e.$videoContainer.attr("id"),{height:"360",width:"640",videoId:e.videoId,events:{onReady:r,onStateChange:s}}),e.PlayerApi=a,e.states.resourceLoaded=!0}}else a=new YT.Player(e.$videoContainer.attr("id"),{height:"360",width:"640",videoId:e.videoId,events:{onReady:r,onStateChange:s}}),e.PlayerApi=a,e.states.resourceLoaded=!0;e.states.loading=!0}function r(t){e.states.loaded=!0,e.states.loading=!1,l(e,!0),e.pendingCallbacks.length>0&&(i.each(e.pendingCallbacks,(function(e,a){a(t.target)})),e.pendingCallbacks=[])}function s(t){var a=e.ApiInterfaceManager,i=e.els;switch(t.data){case YT.PlayerState.UNSTARTED:a.trigger("resume"),a.setPlayerStates({started:!0});break;case YT.PlayerState.PLAYING:0==e.ytStartTracked&&(i.$ytStart.trigger("customEventTracking"),e.ytStartTracked=!0);break;case YT.PlayerState.ENDED:a.trigger("onVideoDone"),0==e.ytEndTracked&&(i.$ytEnd.trigger("customEventTracking"),e.ytEndTracked=!0);case YT.PlayerState.PAUSED:case YT.PlayerState.UNSTARTED:case YT.PlayerState.BUFFERING:case YT.PlayerState.CUED:}}}(e))};n.youtube=r.extend({name:"youtube",states:{ready:!1,playing:!1,resourceLoaded:!1,loading:!1,loaded:!1},progressTimer:null,videoJSON:null,videoId:null,$videoContainer:null,els:null,ytStartTracked:!1,ytEndTracked:!1,pendingCallbacks:null,PlayerApi:null,ApiInterfaceManager:null,initialize:function(e){var t=this,i=t.ApiInterfaceManager=e.ApiInterfaceManager,n=t.videoJSON=e.videoJSON;t.els={};const{$player:r}=i;t.els.$ytEnd=r.find(".js-vid-youtube-tracking-end"),t.els.$ytStart=r.find(".js-vid-youtube-tracking-start"),a.AbstractApiInterface.prototype.initialize.call(t,e),t.pendingCallbacks=[],t.$videoContainer=t.$el,n&&(t.videoId=n.youtubeID)},checkHasSource:function(){var e=this.videoJSON;return!(!e||void 0===e.youtubeID||!e.youtubeID)},checkContentExists:function(e){if("function"==typeof e){var t,a=this,n=this.videoJSON,r=n.youtubeID,s=n.youtubeKey;r?(t={url:"https://www.googleapis.com/youtube/v3/videos?part=id&id="+r+"&key="+s,beforeSend:function(){o("[API-YT] Checking youtubeID "+r+" against API")},error:function(t,a){o("[API-YT] Error checking youtubeID "+r,[t,a]),e(!0)},success:function(t){t.pageInfo.totalResults>=1?(e(!0),a.ApiInterfaceManager.trigger("ready")):(o("[API-YT] Content does not exist for youtubeID "+r),e(!1))}},i.ajax(t)):e(!1)}},initApi:function(){var e=this;e.$el.trigger("youtubeInit"),u(this,(function(t){o("[API-YT] Init YouTube API"),e.ApiInterfaceManager.setPlayerStates({apiReady:!0})}))},play:function(e){var t=this;o("[API-YT] play video"),u(t,(function(e){e.playVideo()})),t.states.playing=!0,l(t,!0),t.ApiInterfaceManager.trigger("onContentStart")},pause:function(){var e=this;e.PlayerApi;o("[API-YT] pause video"),e.states.playing&&(u(this,(function(e){e.pauseVideo()})),e.states.playing=!1,l(e,!1))},resume:function(){var e=this;e.states.resourceLoaded&&!e.states.playing&&(o("[API-YT] resume video"),u(this,(function(e){e.playVideo()})),e.states.playing=!0,l(e,!0))},stop:function(){o("[API-YT] stop video"),u(this,(function(e){e.stopVideo()})),this.states.playing=!1,l(this,!1)},seekTo:function(e){this.states.resourceLoaded&&(o("[API-YT] seek to "+e),u(this,(function(t){t.seekTo(e)})))},setVolume:function(e){o("[API-YT] set volume to "+e),u(this,(function(t){t.setVolume(100*e)}))},mute:function(){o("[API-YT] mute"),u(this,(function(e){e.mute()}))},unMute:function(){o("[API-YT] unMute"),u(this,(function(e){e.unMute()}))},getCurrentTime:function(){var e=this.PlayerApi;return e?e.getCurrentTime():0},getVolume:function(){var e=this.PlayerApi;return e?e.getVolume():0},disable:function(){var e=this.PlayerApi;e&&e.destroy()}})}(window)},2631:(e,t,a)=>{"use strict";var i=a(2257),n=a(9755);!function(e){var t,a,r=e.Phoenix;r||(e.Phoenix=r={}),a=(t=r.VideoPlayer=r.VideoPlayer||{}).Views=t.Views||{};var s,o=t.log,l={},u={pause:function(){d(this).pause()},stop:function(){d(this).stop()},play:function(e,t){d(this).play(t)},resume:function(){d(this).resume()},seekTo:function(e,t){d(this).seekTo(t)},seekToLive:function(e,t){d(this).seekToLive(t)},setVolume:function(e,t){d(this).setVolume(t)},mute:function(){d(this).mute()},userGesture:function(){d(this).userGesture()},unMute:function(){d(this).unMute()},showDiagnosticWindow:function(){d(this).showDiagnosticWindow()},fullscreen:function(e,t){d(this).fullscreen(t)},updatePlayback:function(e,t){var a,i=t.states,n=i.playerType;h(t,n),i.started&&(o("[MANAGER] Play with new playback: ",i.playback),a=d(this),"chromecast"===n?(a.pause(),a.stop(!0)):a.pause()),v(this.playerId,n),m(n),t.trigger("playbackUpdated")},updateQuality:function(e,t,a){var i,n=t.states;n.started&&!a&&(o("[MANAGER] Play with new quality: ",n.quality),(i=d(this)).pause(),i.play(!0)),t.trigger("qualityUpdated")}},c={onContentEnd:{name:"contentEnd"},onVideoDone:{name:"videoDone"},onVideoProgress:{name:"videoProgress"},onVideoLoading:{name:"videoLoading"},onVideoDurationChange:{name:"videoDurationChange"},onResourceStart:{name:"resourceStart"},onAdStart:{name:"adStart"},onAdEnd:{name:"adEnd"},onContentStart:{name:"contentStart"},onStateChange:{name:"stateChange"},onAdBlocked:{name:"adBlocked"},playerStartError:{name:"playerStartError"},videoStartError:{name:"videoStartError"},adError:{name:"adError"},onVideoPlaybackError:{name:"videoPlaybackError"},diagnosticWindowCloseButton:{name:"diagnosticWindowCloseButton"},droppedFrameCountAlert:{name:"droppedFrameCountAlert"},play:{name:"play"},pause:{name:"pause"},resume:{name:"resume"}},d=function(e){var t=p(e);if(t)return t.activeInterface},p=function(e){return l[e.playerId]},g=function(e){var t=p(e);if(t)return t.Player},y=function(e,a,i){var r=(s||(s=n(`<div class="js-vid-player-type-holder av-player-type-holder ${t.classnames.hide}"/>`)),s.clone());return r.attr("id","js-vid-player-"+a+i),r.addClass("av-"+a+"-player-holder js-"+a+"-player-holder"),r.appendTo(e),r},v=function(e,t){var a,i=l[e];return i&&(a=i.apiInterfaces[t]),a?(o("[MANAGER] Set ApiInterface to "+t),i.activeInterface=a,"function"==typeof a.initApi&&a.initApi(),!0):(o("[MANAGER] Requested ApiInterface ["+t+"] is unavailable"),!1)},h=function(e,a){var i=e.$el.find(".js-vid-player-type-holder"),n=e.$el.find(".js-"+a+"-player-holder");i.addClass(t.classnames.hide),n.removeClass(t.classnames.hide)},m=function(e){n(document);document.dispatchEvent(new CustomEvent("update_tracking_params",{detail:{eventName:"pageLoad",trackingParamsOverride:{tealium:{utagData:{videoPlayerType:e}}}}}))};a.ApiInterfaceManager=Backbone.View.extend({playerId:null,ready:!1,autoplayTypes:{normal:"normal",muted:"muted",none:"none"},autoplayTypeAllowed:"",initialize:function(e){var a=this,r=e.Player;a.playerId=r.playerId,a.$player=r.$el,a.autoplayTypeAllowed=a.autoplayTypes.none;var s=function(e,a){var r,s,u=a.playerId,c=[],d={};let p=!1;if(!l[u])return l[u]=s={Player:a},n.each(t.ApiInterfaces,(function(t,n){const s=n.prototype.name,l=a.$el[0],g=l.dataset.jwMediaId,v=l.dataset.jwContextName;let h,m;"uvpjs"===s&&g||"jwplayer"===s&&p||(o("[MANAGER] Initialize ApiInterface "+t),m=y(e.$el,s,u),h=new n({el:m,ApiInterfaceManager:e,videoJSON:a.videoJSON,videoPlayersContainerElement:l}),r||(r=h),d[s]=h,p="giantbomb"===v&&"youtube"===s&&d[s]&&"jwplayer"!==a.Preferences.getPreference("playback",a.playerId)&&!(0,i.Z)(),c.push(s))})),s.activeInterface=r,s.apiInterfaces=d,s.count=c.length,o("[MANAGER] managerApiInstances: ",l),c}(a,r);s&&o("[MANAGER] Player type"+(1!=s.length?"s":"")+" loaded: ",s.join(", ")),r.on("all",(function(e){u[e]&&(Function.prototype.apply?u[e].apply(a,arguments):u[e].call(a,Array.prototype.slice.call([arguments])))})),r.on("disable",(function(){!function(e){var t=l[e];if(t)for(const e in t.apiInterfaces)t.apiInterfaces[e].disable()}(a.playerId)})),r.ApiInterfaceManager=a,a.on("all",(function(e,t){var a=c[e];a&&r.trigger(a.name,t)})),o("[MANAGER] For playerId ["+r.playerId+"] Initialized")},getActiveInterface:function(){return d(this)},getInterface:function(e){return function(e,t){var a=l[e];return a?a.apiInterfaces[t]:null}(this.playerId,e)},getAdParams:function(){return this.getVideoJson().adCall},shouldPlayAd:function(){var e=this.getPlayerState("adPlayed");return!(!this.getAdParams()||!0===e)},getVideoJson:function(){return g(this).videoJSON},getVideoUrl:function(e,t,a){var i,n=g(this),r=n.videoJSON;if(i=n.states.quality,!e&&i||(i=t||"adaptive_stream"),o("[MANAGER] getVideoUrl for ["+i+"] from videoStreams: ",JSON.stringify(r.videoStreams)),void 0===r.videoStreams[i]){if(void 0!==r.videoStreams[a])return r.videoStreams[a];i="adaptive_stream"}return r.videoStreams[i]},getCurrentTime:function(){var e=d(this);return e&&e.getCurrentTime?e.getCurrentTime():0},getDuration:function(){var e,t=d(this);return t&&t.getDuration?((e=t.getDuration())||(e=g(this).videoJSON.lengthSeconds),e):0},getVolume:function(){var e=d(this);return e&&e.getVolume?e.getVolume():0},getPlayerState:function(e){return g(this).states[e]},setPlayerStates:function(e){g(this).setStates(e)},isDisabled:function(){return g(this).states.disabled},configureAutoplay:function(){var e=d(this);return!!e&&e.configureAutoplay()},checkCanAutoplay:function(){var e=d(this);return!!e&&e.checkCanAutoplay()}})}(window)},6683:()=>{!function(e){"use strict";var t,a,i=e.Phoenix;i||(e.Phoenix=i={}),a=(t=i.VideoPlayer=i.VideoPlayer||{}).Views=t.Views||{};var n="is-vid-sticky-chrome",r=function(e,t){e.states.stickyChrome||(e.setStates({hideControlChrome:!t,showControlChrome:t}),t?e.trigger("showControlChrome"):e.trigger("hideControlChrome"))},s=function(e){e.hoverTimeout=setTimeout((function(){e.Player.states.dragging?s(e):r(e.Player,!1)}),2e3)},o=function(e){return!(!e.started||e.adPlaying)};a.ControlChrome=Backbone.View.extend({untapTimeout:null,hoverTimeout:null,previousClientX:null,previousClientY:null,keepAlive:!1,events:{"touchend .js-vid-player-holder, .js-vid-play":"touchPlayer","touchend .js-vid-player-chrome":"touchInteract",mousemove:"hoverPlayer","mouseenter .js-vid-box":"enterControlChrome","mouseleave .js-vid-box":"leaveControlChrome",mouseenter:"enterPlayer",mouseleave:"leavePlayer",adStart:"show",contentStart:"delayHide",contentEnd:"show",videoDone:"show"},Player:null,initialize:function(e){var t,a=this;(t=a.Player=e.Player).$el.hasClass(n)&&t.setStates({stickyChrome:!0}),r(t,!1),t.on("fullscreen",(function(){a.hide()}))},show:function(){var e=this,t=e.Player;e.keepAlive=!0,clearTimeout(e.hoverTimeout),r(t,!0)},hide:function(){var e=this,t=e.Player,a=t.states;o(a)&&(e.keepAlive=!1,clearTimeout(e.hoverTimeout),r(t,!1))},delayHide:function(e){var t=this,a=t.Player,i=a.states;o(i)&&(r(a,!0),clearTimeout(t.hoverTimeout),t.keepAlive||s(t))},hoverPlayer:function(e){var t,a,i=this,n=i.Player,l=n.states;(t=i,(a=e).clientX===t.previousClientX&&a.clientY===t.previousClientY||(t.previousClientX=a.clientX,t.previousClientY=a.clientY,0)||!o(l))||(r(n,!0),clearTimeout(i.hoverTimeout),i.keepAlive||s(i))},enterControlChrome:function(e){this.keepAlive=!0,clearTimeout(this.hoverTimeout)},leaveControlChrome:function(e){this.keepAlive=!1,this.hide()},enterPlayer:function(e){this.Player.states.fullscreen||clearTimeout(this.hoverTimeout)},leavePlayer:function(e){this.Player.states.fullscreen||this.hide()},touchPlayer:function(e){var t=this.Player,a=t.states;if(a.started&&!t.$el[0].dataset.jwMediaId)return e.preventDefault(),r(t,!a.showControlChrome),this.touchInteract(e),!1},touchInteract:function(e){var t=this,a=t.Player,i=a.states;clearTimeout(t.untapTimeout),i.showControlChrome&&(t.untapTimeout=setTimeout((function(){i.dragging?t.touchInteract(e):r(a,!1)}),5e3))}})}(window)},8390:(e,t,a)=>{var i=a(9755);!function(e){"use strict";var t,a,n=e.Phoenix;n||(e.Phoenix=n={}),a=(t=n.VideoPlayer=n.VideoPlayer||{}).Views=t.Views||{};t.log;a.AbstractPreference=Backbone.View.extend({name:"",disabled:!1,saveToCookie:!0,controlType:"preference",els:null,states:null,Player:null,Preferences:null,initialize:function(e){var t=this;t.Player=e.Player,t.Preferences=e.Preferences,t.els&&"object"==typeof t.els&&(t.els=i.extend({},t.els)),t.states&&"object"==typeof t.states&&(t.states=i.extend({},t.states))},choosePreference:function(e){var t,a=this,n=i(e.currentTarget);e.preventDefault(),a.disabled||(t=a.setPreference(n),a.savePreferences(t))},getValue:function(e){return e.data("cmd-value")},savePreferences:function(e){e&&this.trigger("change",e)},loadPreference:function(e){return this.states},setPreference:function(e){},disable:function(e){this.disabled=e}})}(window)},1179:(e,t,a)=>{var i=a(9755);!function(e){"use strict";var t,a,n=e.Phoenix;n||(e.Phoenix=n={}),(t=n.VideoPlayer=n.VideoPlayer||{}).Views=t.Views||{},a=t.Controls=t.Controls||{};var r,s=t.log,o="[CHROMECAST] ",l="adaptive_restricted",u=!1,c=!1,d=(r=!1,function(e){r||i.ajax({url:"https://www.gstatic.com/cv/js/sender/v1/cast_sender.js?loadCastFramework=1",dataType:"script",cache:!0,success:function(){r=!0}})}),p=function(e){e.els.$chromecastWrap.removeClass(t.classnames.hide),cast.framework.CastContext.getInstance().setOptions({receiverApplicationId:chrome.cast.media.DEFAULT_MEDIA_RECEIVER_APP_ID}),e.RemotePlayer=new cast.framework.RemotePlayer,e.RemotePlayerController=new cast.framework.RemotePlayerController(e.RemotePlayer),e.RemotePlayerController.addEventListener(cast.framework.RemotePlayerEventType.IS_CONNECTED_CHANGED,e.switchPlayer.bind(e)),e.RemotePlayerController.addEventListener(cast.framework.RemotePlayerEventType.PLAYER_STATE_CHANGED,e.stateChanged.bind(e))};a.Chromecast=Backbone.View.extend({name:"chromecast",els:{$chromecastWrap:null,$chromecastButton:null},events:{"click .js-vid-chromecast-wrap":"chromecastBroadcast"},Player:null,RemotePlayer:null,RemotePlayerController:null,PlayerHandler:null,PlayerState:null,Media:null,Session:null,PreviousStates:{},ChromecastThisPlayer:!1,startTime:0,initialize:function(e){var t=this,a=t.els=i.extend({},t.els);t.PreviousStates=i.extend({},t.PreviousStates),window.navigator.userAgent.match(/Edge/)||window.navigator.userAgent.match("CriOS")||c||(t.Player=e.Player,a.$chromecastWrap=t.$el.find(".js-vid-chromecast-wrap"),a.$chromecastButton=t.$el.find(".js-vid-chromecast"),d(t),u?p(t):window.__onGCastApiAvailable=function(e,a){e&&"undefined"!=typeof chrome&&chrome.cast?(u=!0,p(t)):(c=!0,s("Error",a))})},chromecastBroadcast:function(){t.ChromecastLaunch=!0,this.ChromecastThisPlayer=!0},switchPlayer:function(){var e=this,a=e.Player;return t.ChromecastLaunch&&!e.ChromecastThisPlayer?(e.ChromecastThisPlayer=!1,void(t.ChromecastLaunch=!1)):(a.getCurrentTime()>0&&(e.startTime=a.getCurrentTime()),cast&&cast.framework&&e.RemotePlayer.isConnected?(e.PreviousStates.playback=a.states.playback,e.PreviousStates.playerType=a.states.playerType,e.PreviousStates.quality=a.states.quality,void e.setupRemotePlayer()):void e.resetPlayback())},stateChanged:function(e){this.Player.ApiInterfaceManager},setPlayback:function(){var e=this.Player;e.setStates({playback:"chromecast",playerType:"chromecast"}),e.trigger("updatePlayback",e)},setupRemotePlayer:function(){var e=this,t=e.Player,a=t.ApiInterfaceManager,i=a.getVideoJson();e.Session=cast.framework.CastContext.getInstance().getCurrentSession();var n=a.getVideoUrl(!0,"adaptive_dash",l);n.length||a.getVideoUrl(!0,l),s(o+"Loading media",n);var r=null;i.isLiveStream?(r=new chrome.cast.media.MediaInfo(n,"application/x-mpegurl")).streamType=chrome.cast.media.StreamType.LIVE:r=new chrome.cast.media.MediaInfo(n,"video/mp4"),r.metadata=new chrome.cast.media.GenericMediaMetadata,r.metadata.metadataType=chrome.cast.media.MetadataType.GENERIC,r.metadata.title=decodeURIComponent(i.title);var u=new chrome.cast.media.LoadRequest(r);e.Session.loadMedia(u).then(e.loadSuccess.bind(e),function(t){e.PlayerState="ERROR",s(o+"Remote media load error: "+t)}.bind(e)),a.on("onVideoProgress",(function(){e.startTime=t.getCurrentTime()}))},loadSuccess:function(){var e=this,t=e.Player,a=t.ApiInterfaceManager;e.setPlayback(),e.Media=e.Session.getMediaSession();var i=a.getActiveInterface();i.setMedia(e.Media),i.setPlayer(e.RemotePlayer),i.setController(e.RemotePlayerController),e.startTime>0&&t.setStates({customStartTime:e.startTime}),t.play(),t.setStates({chromecast:!0,played:!1,started:!0,ended:!1})},resetPlayback:function(){var e=this,t=e.Player;s(o+"Reset playback"),t.states.chromecast&&(e.PreviousStates.playback||(e.PreviousStates.playback=t.Preferences.getPreference("playback",t.playerId),e.PreviousStates.quality=t.Preferences.getPreference("quality",t.playerId),e.PreviousStates.playerType="uvpjs"),t.stop(),t.setStates({chromecast:!1,playback:e.PreviousStates.playback,playerType:e.PreviousStates.playerType,quality:e.PreviousStates.quality,customStartTime:e.startTime,switchingSource:!0,started:!0,played:!1,isSeekDisabled:!1}),t.trigger("updatePlayback",t),t.play(!0))}})}(window)},5917:(e,t,a)=>{var i=a(9755);!function(e){"use strict";var t,a,n=e.Phoenix;n||(e.Phoenix=n={}),(t=n.VideoPlayer=n.VideoPlayer||{}).Views=t.Views||{},a=t.Controls=t.Controls||{};t.log;var r={$modal:".js-vid-modal-share",$toggle:".js-vid-share",$shareTypes:".js-vid-share-type",$shareTypesBody:".js-vid-share-types-body",$shareTypeOptions:".js-vid-share-type-options",$sizeOptions:".js-vid-share-sizes",$shareMarkup:".js-vid-share-markup",$startCbx:".js-start-checkbox",$endCbx:".js-end-checkbox",$startTime:".js-start-time",$endTime:".js-end-time",$autoplayCbx:".js-autoplay-checkbox",$loopCbx:".js-loop-checkbox",$typeSelect:".js-share-type-select",$embedOptions:".js-embed-modal",$shareText:".js-vid-share-markup"},s=function(e){var t=e.split(":"),a=0,i=0;return 2===t.length?(a=parseInt(t[0]),a=isNaN(a)?0:a,i=parseInt(t[1]),(i=isNaN(i)?0:i)>=60&&(a+=Math.floor(i/60),i%=60)):(i=parseInt(t[0]),i=isNaN(i)?0:i),(a>0?a+"m":"")+i+"s"},o=function(e,t){var a=e.els,i="link"===t?e.shareData.linkUrl:e.shareData.embedUrl,n="";return a.$startCbx.is(":checked")&&(n+="?t="+s(a.$startTime.val())),a.$endCbx.is(":checked")&&a.$endTime.val()&&(n+=0===n.length?"?":"&",n+="e="+s(a.$endTime.val())),a.$autoplayCbx.is(":checked")&&(n+=0===n.length?"?":"&",n+="autoplay=1"),a.$loopCbx.is(":checked")&&(n+=0===n.length?"?":"&",n+="loop=1"),i+n},l=function(e){var t,a="";if("embed"===e.shareType){t=e.els.$sizeOptions.find("option:selected"),e.currentSize=t.val()||e.defaultSize;var n=i(e.shareData.embedHtml[e.currentSize]);n.attr("src",o(e,"embed")),a=n.prop("outerHTML").replace(/&amp;/g,"&")}else a=o(e,"link");e.els.$shareMarkup.val(a)};a.Share=Backbone.View.extend({name:"share",defaultSize:null,hasStartFocused:!1,shareType:null,shareData:null,els:null,events:{"click .js-vid-share":"toggleShare","keydown .js-end-time, .js-start-time, .js-vid-share-markup":"timeKeydown","keyup .js-end-time, .js-start-time":"changeShareModalCode","click .js-vid-share-markup":"selectMarkup","change .js-refresh-share-code":"changeShareModalCode","change .js-share-type-select":"changeShareType","click .js-vid-share-type":"setShareType"},Player:null,initialize:function(e){var a,i,n=this;(a=n.Player=e.Player).on("contentTimeChange",(function(e){!function(e,t){var a=e.els;if((a.$startTime.is(":focus")||a.$shareMarkup.is(":focus"))&&(e.hasStartFocused=!0),!e.hasStartFocused){var i=Math.floor(t.currentTime),n=Math.floor(i/60),r=i%60;a.$startTime.val(n+":"+(r<10?"0"+r:r)),a.$startTime.change()}}(n,e)})),n.shareData=a.videoJSON.share,i=n,t.getComponents(i,r),i.els.$modal.length&&(i.defaultSize=i.els.$sizeOptions.find("option:eq(0)").val(),l(i))},toggleShare:function(e){var t=this.Player,a=!t.states.share;e.preventDefault(),t.setStates({share:a}),a&&i(e.currentTarget).trigger("customEventTracking"),this.els.$toggle.toggleClass("av-ctrl-on",a)},selectMarkup:function(e){i(e.currentTarget).select()},changeShareType:function(e){this.els.$embedOptions.toggleClass(t.classnames.hide)},setShareType:function(e){var a=this,n=i(e.currentTarget),r=n.data("share-type"),s=a.els.$shareTypeOptions;a.els.$shareTypes.removeClass("av-ctrl-on"),a.els.$shareTypesBody.removeClass("av-share-types-body--"+a.shareType).addClass("av-share-types-body--"+r),n.addClass("av-ctrl-on"),s.each((function(){var e=i(this);e.toggleClass(t.classnames.hide,e.data("share-type")!==r)})),a.shareType=r,l(a)},changeShareModalCode:function(e){l(this)},timeKeydown:function(e){e.stopPropagation()}})}(window)},19:(e,t,a)=>{var i=a(9755);!function(e){"use strict";var t,a,n,r=e.Phoenix;r||(e.Phoenix=r={}),t=r.VideoPlayer=r.VideoPlayer||{},a=t.Views=t.Views||{},n=t.Controls=t.Controls||{};var s=t.log,o=i(window),l=function(e,t){var a,i=!1,n=e.els,r=e.states,s=e.Player,l=n.$embiggenContainer,u=n.$embiggenVidSize,c=r.embiggened,d=u.data("embiggen-class"),p=u.data("debiggen-class");return c!==t&&(i=!0,!0===t?(u.removeClass(p).addClass(d),l.addClass("large").removeClass("small medium"),a="embiggen"):(u.removeClass(d).addClass(p),l.addClass("small").removeClass("medium large"),a="debiggen"),r.embiggened=t,s.setStates(r),o.trigger("resize"),o.trigger("scroll"),s.trigger(a)),i};n.Embiggen=a.AbstractPreference.extend({name:"embiggen",els:{$embiggenContainer:null,$embiggenVidSize:null,$embiggenButtonContainer:null,$embiggenButton:null},states:{embiggened:!1},embiggenStateKey:"embiggened",events:{"click .js-vid-embiggen":"toggleEmbiggen"},Player:null,initialize:function(e){var t,i,n=this;a.AbstractPreference.prototype.initialize.call(n,e),t=n.Player=e.Player,(i=n.els).$embiggenContainer=t.$el.closest(".js-video-embiggen"),i.$embiggenVidSize=t.$el.closest(".js-video-size"),i.$embiggenButtonContainer=n.$(".js-vid-embiggen-wrap"),i.$embiggenButton=n.$(".js-vid-embiggen"),i.$embiggenButton.length&&i.$embiggenVidSize.length&&i.$embiggenContainer.length?"/"===window.location.pathname&&(n.embiggenStateKey="embiggen_frontdoor"):n.disable(!0)},loadPreference:function(e){var t=this;if(!t.disabled)return e&&!0===e[t.embiggenStateKey]&&l(t,!0),t.states},setPreference:function(){var e=this,t=e.Player.states;if(!e.disabled){var a={};return a[e.embiggenStateKey]=t.embiggened,e.savePreferences(a),a}},disable:function(e){var t=this,i=t.els;a.AbstractPreference.prototype.disable.call(t,e),i.$embiggenButton.length&&i.$embiggenButton.remove(),i.$embiggenButtonContainer.length&&i.$embiggenButtonContainer.remove(),t.stopListening()},toggleEmbiggen:function(e){var t=this,a=t.Player.states;t.disabled||(s("toggle embiggen!"),l(t,!a.embiggened),t.setPreference())}})}(window)},5287:(e,t,a)=>{var i=a(9755);!function(e){"use strict";var t,a,n=e.Phoenix;n||(e.Phoenix=n={}),(t=n.VideoPlayer=n.VideoPlayer||{}).Views=t.Views||{},a=t.Controls=t.Controls||{};var r,s=i(window),o=i("html, body"),l=function(t){e.setTimeout((function(){t.$el.focus()}),0)},u=function(e){e.exitFullscreen(),e.setWindowed(!1),s.trigger("resize")},c=(r=!1,function(){r||(r=!0,s.on("MSFullscreenChange webkitfullscreenchange mozfullscreenchange fullscreenchange",(function(e){var a,n=t.getAllInstances(),r=(a=!1,document.msFullscreenElement?a=document.msFullscreenEnabled:document.mozFullScreenElement?a=document.mozFullScreenEnabled:document.webkitFullscreenElement?a=document.webkitFullscreenEnabled:document.fullscreenElement&&(a=document.fullscreenEnabled),a);o.toggleClass("body-fullscreen",r),i.each(n,(function(e,t){t.trigger("fullscreenChange",r)})),s.trigger("resize"),s.trigger("mouseMove")})))});a.Fullscreen=Backbone.View.extend({enteringFullscreen:!1,events:{"click .js-vid-fullscreen":"toggleFullscreen","click .js-vid-fillbrowser":"toggleFillBrowser","dblclick .js-vid-player-holder":"toggleFullscreen",keyup:"keypressHandler"},Player:null,initialize:function(e){var t,a,n,r=this,s=r.$(".js-vid-fullscreen");t=r.Player=e.Player,a=t.el,n=i("<video></video>")[0],a.requestFullscreen||a.msRequestFullscreen||a.mozRequestFullScreen||a.webkitRequestFullscreen||n.webkitEnterFullscreen||(r.$(".js-vid-fullscreen-wrap").remove(),s.remove()),t.on("updatePlayback",(function(){"youtube"===t.states.playerType&&u(r)})),c(),t.on("fullscreenChange",(function(e){!function(e,t,a){var i=!1;if(a){if(!e.enteringFullscreen)return;i=!0,e.enteringFullscreen=!1}t.setStates({fullscreen:a}),t.trigger("fullscreen",a),i&&l(t)}(r,t,e)}))},toggleFullscreen:function(e){var t=this,a=t.Player.states;return e.preventDefault(),t.setWindowed(!1),a.fullscreen?t.exitFullscreen():t.enterFullscreen()},toggleFillBrowser:function(e){var t=this.Player.states;this.setWindowed(!t.windowed),s.trigger("resize")},enterFullscreen:function(){var e=this.Player,t=e.el,a=!!navigator.platform.match(/iPhone|iPod|iPad/),n=e.$el.find("video")[0];return!e.states.disabled&&(this.enteringFullscreen=!0,t.requestFullscreen?t.requestFullscreen():t.msRequestFullscreen?t.msRequestFullscreen():t.mozRequestFullScreen?t.mozRequestFullScreen():!a&&t.webkitRequestFullscreen?t.webkitRequestFullscreen():n&&n.webkitEnterFullscreen&&(n.webkitEnterFullscreen(),i(n).off("webkitendfullscreen"),i(n).on("webkitendfullscreen",(function(){n.paused&&e.pause()}))),!0)},exitFullscreen:function(){return!this.Player.states.disabled&&(document.fullscreenElement&&document.exitFullscreen?document.exitFullscreen():document.msExitFullscreen?document.msExitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitExitFullscreen&&document.webkitExitFullscreen(),!0)},setWindowed:function(e){var t=this.Player;o.toggleClass("body-fauxscreen",e),e&&l(t),t.setStates({windowed:e})},keypressHandler:function(e){var t=this;70===e.which?t.enterFullscreen():71===e.which?t.setWindowed(!0):27===e.which&&u(t)}})}(window)},7908:(e,t,a)=>{var i=a(9755);!function(e){"use strict";var t,a,n,r=e.Phoenix;r||(e.Phoenix=r={}),t=r.VideoPlayer=r.VideoPlayer||{},a=t.Views=t.Views||{},n=t.Controls=t.Controls||{};var s=t.log,o="sticky",l={zIndex:5000050,noStop:!0,unstickyOnAjax:!1},u=function(e,t){var a=!1,n=e.Player,r=e.els,s=e.states,o=r.$stickyContainer,u=s.stickied;return i.sticky&&o&&u!==t&&(a=!0,!0===t?i.sticky(o,l,(function(){c(e,!0)}),(function(){c(e,!1)})):(i.destroySticky(o),c(e,!1)),s.stickied=t,n.setStates(s),e.setPreference()),a},c=function(e,t){var a=e.els.$stickyContainer,i=e.els.$videoSpacer,n=!!i.length;e.disabled||(t?(s("[PIN] add sticky"),a.addClass(o),n&&i.height(a.outerHeight(!0))):(s("[PIN] remove sticky"),a.removeClass(o),n&&i.height("auto")))};n.Pin=a.AbstractPreference.extend({name:"pin",els:{$videoSpacer:null,$stickyContainer:null,$stickyPinButtonContainer:null,$stickyPinButton:null},states:{stickied:!1},stickyClassName:"sticky",stickySettings:{zIndex:5000050,noStop:!0,unstickyOnAjax:!1},events:{"click .js-vid-pin-wrap":"toggleSticky"},Player:null,initialize:function(e){var t,n=this;a.AbstractPreference.prototype.initialize.call(n,e),n.Player=e.Player,(t=n.els).$videoSpacer=i("#video-spacer"),t.$stickyContainer=n.$el.closest(".js-video-sticky"),t.$stickyPinButtonContainer=n.$el.find(".js-vid-pin-wrap"),t.$stickyPinButton=n.$el.find(".js-vid-pin"),t.$stickyPinButton.length&&t.$stickyContainer.length||n.disable(!0)},loadPreference:function(e){var t=this;if(!t.disabled)return e&&!0===e.stickied&&u(t,e.stickied),t.states},setPreference:function(){var e=this,t=e.states;if(!e.disabled){var a={stickied:t.stickied};return e.savePreferences(a),a}},disable:function(e){var t=this,i=t.els;a.AbstractPreference.prototype.disable.call(t,e),i.$stickyPinButton.length&&i.$stickyPinButton.remove(),i.$stickyPinButtonContainer.length&&i.$stickyPinButtonContainer.remove(),t.stopListening()},toggleSticky:function(e){var t=this,a=t.states;t.disabled||(s("[PIN] toggle sticky!"),u(t,!a.stickied))}})}(window)},2099:()=>{!function(e){"use strict";var t,a=e.Phoenix;a||(e.Phoenix=a={}),(t=a.VideoPlayer=a.VideoPlayer||{}).Views=t.Views||{},(t.Controls=t.Controls||{}).PlayPause=Backbone.View.extend({events:{"click .js-vid-play-pause":"togglePlay","click .js-vid-play":"togglePlay","click .js-play-show-episode":"togglePlay","click .js-vid-player-holder":"togglePlay",keypress:"keypressHandler"},Player:null,waiting:!1,initialize:function(e){var t=this;t.Player=e.Player,t.Player.on("diagnosticWindowCloseButton",(function(){t.togglePlay()}))},togglePlay:function(e){var t=this,a=t.Player,i=t.Player.ApiInterfaceManager,n=a.states;if(!t.waiting)return i.ready?(e&&e.preventDefault(),n.playing?(a.trigger("userPaused"),a.pause()):n.started?a.resume():a.play()):(t.waiting=!0,void i.once("ready",(function(){t.waiting=!1,t.togglePlay(e)})))},keypressHandler:function(e){if(32===e.which||107===e.which)return this.togglePlay(e)}})}(window)},4538:(e,t,a)=>{var i=a(9755);!function(e){"use strict";var t,a,n,r=e.Phoenix;r||(e.Phoenix=r={}),t=r.VideoPlayer=r.VideoPlayer||{},a=t.Views=t.Views||{},n=t.Controls=t.Controls||{};var s=t.log,o="av-menu-ctrl--on",l="has-vid-multiple-playbacks",u="has-vid-single-playback",c=[{selector:".js-vid-h264",modernizrProp:"h264"},{selector:".js-vid-m3u8-wrapped",modernizrProp:"h264"},{selector:".js-vid-m3u8:not(.js-vid-m3u8-wrapped)",modernizrProp:"hls"}],d=function(e){return!!e&&e.length>0&&e.closest("html").length>0&&!e.hasClass(t.classnames.hide)},p=function(e){var t=!0;return"undefined"!=typeof Modernizr&&Modernizr.video&&i.each(c,(function(a,i){if(e.is(i.selector)&&!Modernizr.video[i.modernizrProp])return t=!1,!1})),t},g=function(e){var a,i=e.filter(".js-vid-default");return((a=(i=i.not("."+t.classnames.hide)).first()).length<1||a.closest("body").length<1)&&(a=e.first()).hasClass(t.classnames.hide)&&a.removeClass(t.classnames.hide),a},y=function(e,t){var a=e.filter((function(){var e=i(this);return!0===d(e)&&!0===function(e,t){return e.data("cmd-value")===t}(e,t)}));return a},v=function(e,t,a){e&&0!==e.length&&(!0===t?e.addClass(a):!1===t&&e.removeClass(a))},h=function(e){s("[CONTROL] hideControls: ",e),m(e),v(e,!0,t.classnames.hide),v(e.closest(".js-vid-quality-wrap"),!0,t.classnames.hide),e.trigger("hide")},m=function(e){v(e,!1,o)},f=function(e){var t=e.els.$menu;t&&t.toggleClass("av-menu-disabled",e.disabled)};n.PlaybackQuality=a.AbstractPreference.extend({name:"playbackQuality",els:{},states:{playback:null,quality:null},playback:{},qualities:{},events:{"click .js-vid-playback":"choosePreference","click .js-vid-quality":"choosePreference","hide .js-vid-playback":"updateConfigMenu","show .js-vid-playback":"updateConfigMenu"},Player:null,Preferences:null,initialize:function(e){var t,n,r,o,l,u,c=this;a.AbstractPreference.prototype.initialize.call(this,e),c.playbacks=i.extend({},c.playbacks),c.qualities=i.extend({},c.qualities),(t=c.Player).on("adStart",(function(){c.disabled||c.disable(!0)})),t.on("contentStart",(function(){c.disabled&&c.disable(!1)})),(n=c.els).$qualityOptions=c.$(".js-vid-quality"),n.$playbackOptions=c.$(".js-vid-playback"),r=function(e){var t,a=e.els,n=e.Player.ApiInterfaceManager,r=a.$playbackOptions,o=a.$qualityOptions,l={},u={},c=!1,g=!1,y=[];return s("[CONTROL] initPlaybackQualities"),o?(s("[CONTROL] $qualities: ",o),o.each((function(){var t=i(this),a=e.getValue(t);p(t)&&(u[a]||(u[a]=[]),u[a].push(this))}))):(s("error","[CONTROL] No qualities defined!"),r=void 0),r&&(s("[CONTROL] $playbacks: ",r),r.each((function(){var r,o=i(this),c=e.getValue(o),p=o.data("player"),v=n.getInterface(p),m=d(o),f=v&&v.checkHasSource(),P=m&&f,S=o.data("qualities").split(","),w=[],k=[];if(!l[c]){for(t=0;t<S.length;t++)r=S[t],u[r]&&(i.merge(k,u[r]),w.push(r));P&&i.inArray(p,y)<0&&y.push(p),w.length>0&&(g=!0),l[c]={isAvailable:P,playerType:p,qualities:w,$button:o,$qualities:i(k)},P?v.checkContentExists((function(e){e||(h(o),h(l[c].$qualities),a.$playbackOptions=a.$playbackOptions.not(o),delete l[c])})):h(o),s("[CONTROL] Playback Quality Elements for ["+c+"]: ",l[c])}})),y.length>0&&(e.playbacks=l,c=!0)),c&&g}(c),r||c.$(".js-vid-invalid-playbacks").show(),(u=(o=c).$(".js-vid-playbacks")).length&&(l=u.find(".js-vid-menu"),o.els.$menu=l,o.els.$configMenu=u,o.updateConfigMenu()),c.on("saved",(function(){c.qualityChanged()})),s("[CONTROL] hasPlaybacks? ",r)},choosePreference:function(e){var t=i(e.currentTarget);!this.disabled&&t.hasClass("js-vid-playback")&&e.stopPropagation(),a.AbstractPreference.prototype.choosePreference.call(this,e)},loadPreference:function(e){var t,a,n,r,o,l,u,c=this,d=c.els.$playbackOptions,p=c.els.$qualityOptions;if(t=e.playback,u=e.quality,t&&(0===(r=y(d,t)).length?t=void 0:(a=!!(n=c.playbacks[t]||{}).isAvailable)&&(l=n.qualities),c.setPlayback(t)),u&&(o=y(p,u),l=i.map(p,(function(e){return i(e).data("cmd-value")})),0===o.length&&(u=void 0),c.setQuality(o.data("cmd-value"))),t||(r=g(d),t=c.getValue(r),l=(n=c.playbacks[t]).qualities,e.playback&&(s("[CONTROL] playback ["+e.playback+"] is invalid -- use default playback ["+t+"]"),null===a&&(!0,delete e.playback)),c.setPlayback(t)),!u){var v=g(c.els.$qualityOptions);u=c.getValue(v),c.setQuality(v.data("cmd-value"))}return(u=e.quality)&&0>i.inArray(u,l)&&(!0,delete e.quality),c.states},setPreference:function(e){var t,a,i=this,n=i.getValue(e);if(e.hasClass("js-vid-quality")?t=i.setQuality:e.hasClass("js-vid-playback")&&(t=i.setPlayback),t)return a=t.call(i,n),s("[CONTROL] setPreference changeSet: ",a),a},disable:function(e){a.AbstractPreference.prototype.disable.call(this,e),f(this)},setControl:function(e,t){var a,i,n=!1;return(a=y(e,t)).length>0&&!1===(!!(i=a)&&i.hasClass(o))&&(s("[CONTROL] New Value Control for ["+t+"]: ",a),n=!0,v(a,!0,o),m(e.not(a))),n},setQuality:function(e,t,a){var i,n=this,r=n.Player,o=n.els.$qualityOptions;return!0===n.setControl(o,e)&&(s("[CONTROL] setQuality newValue: "+e),r.setStates({quality:e}),n.states.quality=e,i={quality:e}),i},qualityChanged:function(e){var t=this.Player,a=t.getCurrentTime();return a>0&&t.setStates({customStartTime:a}),t.updateQuality()},setPlayback:function(e){var a,n,r,o,l,u,c,d=this,p=d.els,y=d.Player,m=p.$qualityOptions,f=d.setControl(p.$playbackOptions,e),P=d.Preferences.getPreference("quality",y.playerId),S=d.playbacks[e];if(S&&!S.isAvailable&&i.each(d.playbacks,(function(e,t){if(t.isAvailable)return S=t,!1})),!0===f){s("[CONTROL] setPlayback to: ",e);var w=y.getCurrentTime();w>0&&y.setStates({customStartTime:w}),l=S.playerType,y.setStates({playback:e,playerType:l}),d.states.playback=e,u={playback:e},n=S.$qualities,r=m.not(n),h(r),v(c=n,!1,t.classnames.hide),v(c.closest(".js-vid-quality-wrap"),!1,t.classnames.hide),c.trigger("show"),a=S.qualities,s("[CONTROL] > available qualities for playback: ",a),s("[CONTROL] > current activeQuality: ",P),(!P||0>i.inArray(P,a))&&(s("[CONTROL] > activeQuality not found for playback"),o=g(n),P=d.getValue(o),s("[CONTROL] > set activeQuality to: ",P)),d.setQuality(P,!0),y.trigger("updatePlayback",y)}return u},updateConfigMenu:function(e){var t=this.els,a=t.$configMenu;!a||a.length<1||(t.$playbackOptions.filter((function(){var e=i(this);return d(e)&&!e.is("meta")})).length>1?a.removeClass(u).addClass(l):a.removeClass(l).addClass(u))}})}(window)},1102:(e,t,a)=>{var i=a(9755);!function(e){"use strict";var t,a=e.Phoenix;a||(e.Phoenix=a={}),((t=a.VideoPlayer=a.VideoPlayer||{}).Controls=t.Controls||{}).Report=Backbone.View.extend({els:{$reportSuckData:null},events:{"click .js-vid-report-suck":"reportSuck"},Player:null,initialize:function(e){var t=this;(t.els=i.extend({},t.els)).$reportSuckData=t.$(".js-vid-report-suck-data")},reportSuck:function(e){if(e.preventDefault(),confirm("This will send us a report that we will use to diagnose\nvideo playback issues. Are you sure you want to send us a report?\n\r\rPLEASE only do this if you are experiencing issues with the video player.")){var a=this.els.$reportSuckData,n="NONE";try{var r=t.getLogLines();n=JSON.stringify(r)}catch(e){n="ERROR: "+e.toString()}i.ajax({type:"POST",url:"/videos/user/report",data:{uniqueKey:a.data("unique-key"),videoId:a.data("video-id"),trace:n}}).done((function(e){alert("Thanks, we're sorry you're having problems. This report will help us fix them. Please only send one report per video")}))}}})}(window)},8153:(e,t,a)=>{var i=a(9755);!function(e){"use strict";var t,a,n,r=e.Phoenix;r||(e.Phoenix=r={}),t=r.VideoPlayer=r.VideoPlayer||{},a=t.Views=t.Views||{},n=t.Controls=t.Controls||{};var s=t.log,o=function(e){var t={};i.extend(t,e.setPreference(e.els.$volume),e.setPreference(e.els.$muteToggle)),e.savePreferences(t)};n.Volume=a.AbstractPreference.extend({name:"volume",els:{$volume:null,$handle:null,$level:null,$bar:null,$mute:null,$unmute:null,$muteToggle:null,$unMuteAutoplay:null},states:{mute:!1,volume:1},mousemoveEvent:"mousemove.volumeSlide",touchmoveEvent:"touchmove.volumeSlide",events:{"mousedown .js-player-volume":"volumeChange","touchstart .js-player-volume":"volumeChange","mousedown.volumeSlide .js-player-volume":"volumeSlideStart","mouseup.volumeSlide":"volumeSlideStop","touchstart.volumeSlide .js-player-volume":"volumeSlideStart","touchend.volumeSlide":"volumeSlideStop","click .js-mute-show-episode":"toggleMute","click .js-unmute-show-episode":"userUnMute","click .js-vid-unmute-autoplay":"unMuteAutoplay",keydown:"hotkeyHandler"},Player:null,Preferences:null,initialize:function(e){var t,i,n=this;a.AbstractPreference.prototype.initialize.call(n,e),t=n.Player=e.Player,(i=n.els).$volume=n.$(".js-player-volume"),i.$handle=n.$(".js-player-volume-handle"),i.$level=n.$(".js-player-volume-level"),i.$bar=n.$(".js-player-volume-bar"),i.$mute=n.$(".js-mute-show-episode"),i.$unmute=n.$(".js-unmute-show-episode"),i.$muteToggle=n.els.$mute.add(n.els.$unmute),i.$unMuteAutoplay=n.$(".js-vid-unmute-autoplay"),t.on("setVolume",(function(e){n.moveVolumeHandle(e)})),t.on("contentStart adStart",(function(){t.states.mute?t.mute():t.setVolume(t.states.volume,!1,!0),t.videoJSON.startMuted&&t.once("unMute",(function(){s("[VOLUME] unmute startMuted video"),n.unMuteAutoplay()}))})),t.on("initComplete",(function(){t.videoJSON.startMuted&&(s("[VOLUME] start muted"),n.setMute(!0,!0))}))},loadPreference:function(e){var t=this;return e&&void 0!==e.volume&&(t.setVolume(e.volume,!0,!0),t.states.volume=e.volume),e&&void 0!==e.mute&&(t.setMute(e.mute,!0),t.states.mute=e.mute),t.states},setPreference:function(e){var t=this,a=t.Player.states,i={};return e===t.els.$volume?t.states.volume=i.volume=a.volume:e===t.els.$muteToggle&&(t.states.mute=i.mute=a.mute),i},moveVolumeHandle:function(e){var a=t.ratioToPercentString(e);this.els.$level.css("height",a),this.els.$handle.css("bottom",a)},setMute:function(e,t){var a=this,i=a.Player,n=i.states;e?(i.mute(),a.moveVolumeHandle(0),s("[VOLUME] mute")):(n.volume>0?a.setVolume(n.volume,t,!0):a.setVolume(.5,t,!0),s("[VOLUME] unMute")),t||o(a)},setVolume:function(e,t,a){var i,n=this,r=n.Player,l=n.states.mute,u=n.els;e>0?(l&&(i=u.$unmute),r.unMute()):(l||(i=u.$mute),r.mute()),s("[VOLUME] setVolume to "),r.setVolume(e),!a&&i&&i.trigger("customEventTracking"),t||o(n)},toggleMute:function(e){var t=this.Player.states;this.setMute(!t.mute)},userUnMute:function(e){s("[VOLUME] volume.js userUnmute()"),this.Player.userGesture(),this.toggleMute()},unMuteAutoplay:function(e){var t=this,a=t.els.$unMuteAutoplay;a&&a.length&&(a.remove(),t.els.$unMuteAutoplay=null,t.Player.userGesture(),t.toggleMute())},volumeChange:function(e){var a=this;if("mousedown"!==e.type||1===e.which){var i=t.getEventInContainerRatio(e,a.els.$volume,"vertical");i!==a.states.volume&&a.setVolume(i)}},volumeSlideStart:function(e){var t=this,a="mousedown"===e.type?t.mousemoveEvent:t.touchmoveEvent;"mousedown"===e.type&&1!==e.which||t.els.$volume.on(a,(function(e){t.volumeChange(e)}))},volumeSlideStop:function(e){var t=this,a="mouseup"===e.type?t.mousemoveEvent:t.touchmoveEvent;"mouseup"===e.type&&1!==e.which||t.els.$volume.off(a)},hotkeyHandler:function(e){var t,a=this,i=a.Player;38===e.which?(t=i.getVolume()+.05,a.setVolume(t<1?t:1),e.preventDefault()):40===e.which?(t=i.getVolume()-.05,a.setVolume(t>0?t:0),e.preventDefault()):77===e.which&&(a.toggleMute(),e.preventDefault())}})}(window)},5618:(e,t,a)=>{var i=a(9755);!function(e){"use strict";var t,a,n=e.Phoenix;n||(e.Phoenix=n={}),(t=n.VideoPlayer=n.VideoPlayer||{}).Views=t.Views||{},a=t.Controls=t.Controls||{};var r=t.log,s={start:{fn:"start",params:["options"]},getPlayerInfo:{fn:"getPlayerInfo"},play:{fn:"play",params:["videoId"]},pause:{fn:"pause",params:["videoId"]},resume:{fn:"resume",params:["videoId"]},isPlaying:{fn:"isPlaying",params:["videoId"]},getCurrentTimeStamp:{fn:"getCurrentTimeStamp",params:["videoId"]},setCurrentTimeStamp:{fn:"setCurrentTimeStamp",params:["videoId","timestamp"]},ended:{fn:"ended",async:!0,params:["videoId","wait"]}},o="[iFrame API] ";a.IframeAPI=Backbone.View.extend({Player:null,contentEndCallback:null,initialize:function(e){var t=this;t.Player=e.Player;e.Player.ApiInterfaceManager;window.addEventListener?addEventListener("message",_.bind(t.receiveMessage,t),!1):attachEvent("onmessage",_.bind(t.receiveMessage,t)),t.Player.on("videoDone",(function(){null!==t.contentEndCallback&&t.contentEndCallback()}))},start:function(e){void 0!==e&&!0===e.disableStartTime&&this.Player.setStates({customStartTimeDisabled:!0});var t={apiVersion:"0.02",userLoggedIn:"loggedIn"==i("meta[name=userAuthState]").attr("content"),userIsPremium:"premium"==i("meta[name=userIsPremium]").attr("content")};return r(o+"Initialize embed api",t),t},getPlayerInfo:function(){var e=this.Player.videoJSON,t={id:e.id,title:e.title,premium:e.premium};return r(o+"Get player info",t),[t]},play:function(){this.Player.play()},pause:function(){this.Player.pause()},resume:function(){this.Player.resume()},isPlaying:function(){return this.Player.states.playing},getCurrentTimeStamp:function(){return this.Player.getCurrentTime()},setCurrentTimeStamp:function(e,t){return this.Player.seekTo(t)},ended:function(e,t,a,i){var n=!this.Player.states.playing&&Math.ceil(this.Player.getCurrentTime())>=this.Player.getDuration();t&&!n?this.contentEndCallback=a:a(n)},receiveMessage:function(e){this.Player.videoJSON;if(this.checkForAMPIntersectionMessages(e),"who-are-you"===e)return"athena";var t=e.data.request;if(t)if(r(o+"Recieve message",e),s.hasOwnProperty(t)){var a=null,i=[];s[t].params&&s[t].params.some((function(t){if(!e.data.hasOwnProperty(t))return a="Missing param "+t,!0;i.push(e.data[t])})),s[t].async&&i.push(function(e){return function(t,a){a?e.ports[0].postMessage({result:"error",data:a}):e.ports[0].postMessage({result:"ok",data:t})}}(e)),i.push((function(e){a=e}));var n=null;if(!a){var l=s[t].fn;r(o+"Calling embed function",[l,i]),n=this[l].apply(this,i)}s[t].async&&!a||(a?e.ports[0].postMessage({result:"error",data:a}):e.ports[0].postMessage({result:"ok",data:n}))}else e.ports[0].postMessage({msg:"error",info:"unknown request"})},checkForAMPIntersectionMessages:function(e){const t=this;e.source===window.parent&&e.origin!==window.location.origin&&e.data&&"amp"===e.data.sentinel&&"intersection"===e.data.type&&e.data.changes.forEach((function(e){var a=e.intersectionRatio>.5;a&&(t.hasAppeared=!0),t.isPlaying()&&!a&&t.hasAppeared&&t.pause()}))}})}(window)},2396:(e,t,a)=>{var i=a(9755);!function(e){"use strict";var t=e.Phoenix;t||(e.Phoenix=t={});var a,n,r,s=t.VideoPlayer=t.VideoPlayer||{},o=s.Views=s.Views||{},l=(s.log,!1),u="pod-recirc--horizontal",c=["align-vertical--child","align-vertical--contain"],d=[],p={played:"video-active",playing:"video-playing"},g="kubrickPausedVideoIds",y="no-sticky",v=function(e,t){var s=e.els.$kubrickRelated;s&&(!1===l&&(l=!0,a=s.data("embiggen-class"),n=s.data("debiggen-class"),r=s.find(".pod"),i.each(c,(function(e,t){d.push(r.find("."+t))}))),t?(s.addClass(a).removeClass(n),r.addClass(u),i.each(d,(function(e,t){t.removeClass(c[e])}))):(s.addClass(n).removeClass(a),r.removeClass(u),i.each(d,(function(e,t){t.addClass(c[e])}))))},h=function(e){var t=!1;i.cookie(g)&&(-1!==i.cookie(g).split(",").map(Number).indexOf(e)&&(t=!0));return t};o.Kubrick=Backbone.View.extend({Player:null,els:{$kubrickInfo:null,$kubrickInfoParent:null,$kubrickRelated:null,$videoSpacer:null},states:{embiggened:!1,played:!1,playing:!1},initialize:function(e){var t=this,a=t.els=i.extend({},t.els),n=t.Player=e.Player;if(t.states=i.extend({},t.states),a.$kubrickInfo=t.$(".kubrick-info"),a.$kubrickInfoParent=t.$(".row"),a.$videoSpacer=i("#video-spacer"),a.$kubrickRelated=t.$("#js-kubrick-pod"),n.on("all",(function(e){switch(e){case"embiggen":!function(e){var t=e.els,a=t.$kubrickInfo,i=t.$videoSpacer;e.states.embiggened||(e.states.embiggened=!0,a&&(a.children().wrap('<div class="container"></div>'),a.addClass(y),i&&i.after(a)),v(e,!0))}(t);break;case"debiggen":!function(e){var t,a,i=e.els,n=i.$kubrickInfo,r=i.$kubrickInfoParent;e.states.embiggened&&(e.states.embiggened=!1,n&&(t=(a=n.find(".container")).children(),a.length>0&&t.unwrap(),n.removeClass(y),r.prepend(n)),v(e,!1))}(t)}var a,n,r,s,o;n=(a=t).Player.states,r=a.states,s=[],o=[],i.each(r,(function(e,t){var a,i=n[e];t!=i&&(r[e]=i,(a=p[e])&&(i?s.push(a):o.push(a)))})),s.length&&a.$el.addClass(s.join(" ")),o.length&&a.$el.removeClass(o.join(" "))})),n.$el.closest(".js-autoplayable").length){var r=n.videoJSON.id;n.on("pause",(function(){!function(e){if(i.cookie(g)){if(!h(e)){var t=i.cookie(g).split(",").map(Number);t.push(e),i.cookie(g,t.toString(),{path:"/"})}}else i.cookie(g,e,{path:"/"})}(r)})),n.on("play resume",(function(){h(r)&&function(e){var t=i.cookie(g).split(",").map(Number);t.splice(t.indexOf(e),1),t.length?i.cookie(g,t.toString(),{path:"/"}):i.cookie(g,null,{path:"/"})}(r)})),h(r)&&(n.videoJSON.autoplay=!1,n.videoJSON.startMuted=!1,i(".js-vid-unmute-autoplay").remove())}}})}(window)},2759:(e,t,a)=>{var i=a(9755);!function(e){"use strict";var t,a,n=e.Phoenix;n||(e.Phoenix=n={}),a=(t=n.VideoPlayer=n.VideoPlayer||{}).Views=t.Views||{};t.log;var r=n.jQuery?n.jQuery.getBody():i(document.body),s="av-menu-open",o="av-ctrl-menu-hit-on",l=function(e){e.closeHandler&&(r.off("click.closeMenu",e.closeHandler),e.closeHandler=null)};a.Menu=Backbone.View.extend({els:{$menuHit:null},closeHandler:null,events:{"click .js-vid-menu-hit":"toggle"},Player:null,initialize:function(e){var t=this;t.Player=e.Player,t.els=e.els,t.Player.on("hideControlChrome",(function(){t.close()}))},close:function(){var e=this;e.$el.removeClass(s),e.els.$menuHit.removeClass(o),l(e),e.trigger("close")},toggle:function(e){var t,a=this,i=!a.$el.hasClass(s);a.$el.toggleClass(s,i),a.els.$menuHit.toggleClass(o,i),e.stopPropagation(),i?((t=a).closeHandler||r.on("click.closeMenu",t.closeHandler=function(){t.close()}),a.trigger("open")):(l(a),a.trigger("close"))}})}(window)},1285:(e,t,a)=>{var i=a(9755);!function(e){"use strict";let t=e.Phoenix;t||(e.Phoenix=t={});const a=t.VideoPlayer=t.VideoPlayer||{},n=a.Views=a.Views||{},r=a.log;let s;s=t.jQuery&&t.jQuery.getDocument?t.jQuery.getDocument():i(document);const o=e.scrollMonitor,l=(JSON.stringify,{looping:"is-vid-looping",contentLoading:"is-vid-content-loading",contentStarted:"is-vid-content-started",played:"is-vid-played",started:"is-vid-started",ended:"is-vid-ended",highDroppedFrameCount:"is-vid-framerate-alert",apiReady:"is-api-ready",adPlaying:"is-vid-ad-playing",counting:"has-vid-countdown",disabled:"is-vid-disabled",loading:"is-vid-loading",playing:"is-vid-playing",autoplay:"is-vid-autoplay",paused:"is-vid-paused",gated:"has-vid-invalid-age",hasGate:"has-vid-age-gated",showAgeGate:"is-vid-age-gate",embiggened:"is-vid-embiggened",mute:"is-vid-muted",share:"is-vid-share-modal-open",stickied:"is-vid-stickied",chromecast:"is-vid-chromecasting",autoplayUserDisabled:"is-vid-autoplay-disabled",autoplayModal:"is-vid-autoplay-modal-open",fullscreen:"is-vid-fullscreen",windowed:"is-vid-windowed is-vid-fullfaux",isLive:"is-vid-live",isOffAir:"is-vid-offair",isRewound:"is-vid-rewound",isSeekDisabled:"is-vid-noseek",showControlChrome:"is-vid-show-controls",hideControlChrome:"is-vid-hide-controls",stickControlChrome:"is-vid-stick-controls"}),u=function(e){const t=e.$el,a=e.els.$playerContainer;let i="100%";const n="width";a.css(n,i);const r=t.height();r<a.height()&&(i=1.7777777777777777*r),a.css(n,i)};n.Player=Backbone.View.extend({els:null,playerId:null,videoJSON:null,retryCount:0,retryThreshold:1,events:{},states:{videoId:null,playback:null,playerType:null,quality:null,switchingSource:!1,highDroppedFrameCount:!1,adPlayed:!1,contentLoading:!1,contentStarted:!1,played:!1,started:!1,ended:!1,adPlaying:!1,counting:!1,disabled:!1,loading:!0,playing:!1,paused:!1,autoplay:!1,volume:1,gated:!1,hasGate:!1,showAgeGate:!1,embiggened:!1,mute:!1,share:!1,stickied:!1,chromecast:!1,autoplayUserDisabled:!1,autoplayModal:!1,fullscreen:!1,windowed:!1,adCurrentTime:null,currentTime:0,duration:0,hasTimeChange:!1,isAtEndTime:!1,isLive:!1,isOffAir:!0,isRewound:!1,isSeekDisabled:!0,overrideDuration:!1,customStartTime:0,liveStartTime:0,liveSeekDelay:10,liveSeekDelayLeft:null,showControlChrome:!0,hideControlChrome:!1,stickyChrome:!1,diagnosticWindow:!1,dragging:!1,retriedLoad:!1},controlsEnabled:null,controlsInitialized:!1,watcher:null,AgeGate:null,ApiInterfaceManager:null,Preferences:null,initialize(e){const t=this,n=t.states={...t.states},s=e.AgeGate,l=e.Preferences,c=e.videoJSON;t.els=e.els,t.controlsEnabled={},t.playerId=e.playerId,t.videoJSON=c,n.videoId=c.id,t.trigger("init",[t]),!1!==s.isOfAge(t.videoJSON)?(t.AgeGate=s,t.Preferences=l,o&&(t.watcher=o.create(t.$el)),u(t),i(window).on("resize",(function(){u(t)})),t.on("initComplete",(function(){if(t.off("initComplete"),t.setStates({loading:!1}),"mediaSession"in navigator){t.setMediaSessionMetadata();const e=10,a=new Map([["play",()=>{console.log("User click the play button."),t.paused?t.resume():t.play()}],["pause",()=>{console.log("User click the pause button."),t.pause()}],["stop",()=>{console.log("User click the stop button."),t.stop()}],["seekbackward",a=>{console.log("User seeked backwards.");const i=a.seekOffset||e,n=Math.max(t.currentTime-i,0);t.seekTo(n)}],["seekforward",a=>{console.log("User seeked forwards.");const i=a.seekOffset||e,n=Math.min(t.currentTime+i,t.getDuration());t.seekTo(n)}],["seekto",e=>{t.seekTo(e.seekTime)}]]);for(const[e,t]of a)try{navigator.mediaSession.setActionHandler(e,t)}catch(t){console.debug(`The media session action "${e}" is not supported yet.`)}}t.ApiInterfaceManager.checkCanAutoplay()?t.states.counting||setTimeout((function(){t.autoplay()}),0):(r("[UI] Initialize ERROR: Autoplay was requested, but was not allowed:"),r("[UI] 1. self.videoJSON.autoplay: "+t.videoJSON.autoplay),r("[UI] 3. self.ApiInterfaceManager.checkCanAutoplay: "+t.ApiInterfaceManager.checkCanAutoplay))})),t.on("videoDone",(function(){t.states.switchingSource||(t.videoJSON.isLiveStream&&!t.states.isOffAir&&t.retryCount<t.retryThreshold?(t.retryCount++,r("[UI] Stream ended, retry. Retry count: "+t.retryCount),t.play(!0)):t.setStates({playing:!1,started:!1,ended:!0,isSeekDisabled:!0}))})),t.on("contentStart",(function(){const e=t.states.paused;t.retryCount=0,t.setStates({playing:!0,paused:!1,started:!0,ended:!1}),e&&t.pause()})),t.on("adStart",(function(){const e=t.states.paused,a=t.states.contentStarted;t.setStates({playing:!0,paused:!1,started:!0,ended:!1}),e&&!a&&t.pause()})),t.on("videoStartError",(function(){t.states.retriedLoad?r("[UI] Giving up, we can't load the video"):(r("[UI] there was an error loading the video, try again without ads"),t.trigger("play",!0),t.states.retriedLoad=!0)})),t.on("all",(function(e,a){("contentEnd"!==e&&"videoDone"!==e||!t.states.switchingSource)&&t.$el.trigger(e,a)})),t.on("videoPlaybackError",(function(e){const a=e.errorInfo.message;r("[UI] VIDEO PLAYBACK ERROR: "+e.errorInfo.errorCode),r(e),t.videoJSON.streamsRefresh&&a.includes("manifestLoadError")&&(r("[UI] MANIFEST ERROR"),i.ajax({url:t.videoJSON.streamsRefresh+t.videoJSON.id,type:"GET",success(e){t.videoJSON.videoStreams=e,r("[UI] NEW TOKEN: loaded new streams, trying play again"),r(e),t.trigger("play",!0),t.states.retriedLoad=!0}}))})),t.on("destroy",(function(){r("[UI] Destroying player"),t.stop(),t.watcher&&t.watcher.destroy(),t.$el.remove(),a.destroyInstance(t.playerId)}))):s.gate(t)},play(e){const t=this,a=t.states,i=t.$el;return!a.disabled&&((!t.AgeGate||!t.AgeGate.isAgeGated(t))&&(e||t.trigger("beforePlay"),!1===a.playing&&r("[UI] video is not playing > play"),!1===a.started&&i.trigger("videoStart"),!0===a.ended&&(i.trigger("videoReplay"),e=!0),t.setStates({played:!0,playing:!0,paused:!1,started:!0,ended:!1}),i.trigger("contentPlay"),s.trigger("video_play"),t.trigger("play",e),!0))},autoplay(){const e=this;if(r("[UI] Player.js autoplay type allowed:"+e.ApiInterfaceManager.autoplayTypeAllowed),e.ApiInterfaceManager.checkCanAutoplay()&&!e.states.autoplayUserDisabled){const t=function(){return e.setStates({autoplay:!0}),!e.states.started&&!e.states.ended&&(e.ApiInterfaceManager.autoplayTypeAllowed===e.ApiInterfaceManager.autoplayTypes.muted&&(e.mute(),r("[UI] MUTING FROM TRIGGER PLAY")),e.play())},a=function(){e.watcher&&!e.watcher.isInViewport?e.watcher.on("enterViewport",(function(){t()})):t()};if(document.hidden){const e=function(){a()};window.onfocus=e;try{window.parent&&(window.parent.onfocus=e)}catch(e){}return!1}return a()}},pause(){const e=this;return!e.states.disabled&&(e.trigger("beforePause"),e.setStates({paused:!0,playing:!1}),r("[UI] Pause video player"),e.$el.trigger("contentPause"),e.trigger("pause"),!0)},stop(){const e=this;return!e.states.disabled&&(e.trigger("beforeStop"),e.setStates({stopped:!0,playing:!1}),r("[UI] Stop video player"),e.$el.trigger("contentStop"),e.trigger("stop"),!0)},resume(){const e=this;return!e.states.disabled&&(e.setStates({paused:!1,playing:!0}),e.$el.trigger("contentResume"),e.trigger("resume"),!0)},updateQuality(){const e=this;return!!e.states.started&&(e.setStates({playing:!1,started:!1,ended:!1,switchingSource:!0}),e.play(!0))},disable(){const e=this;e.setStates({disabled:!0}),e.trigger("disable"),e.off(),e.stopListening(),e.$el.off()},enable(){this.setStates({disabled:!1}),this.trigger("enable")},seekTo(e){const t=this;return e=Number.parseFloat(e),!t.states.disabled&&(t.trigger("videoProgress",{...t.states,currentTime:e}),this.setStates({currentTime:e}),t.trigger("seekTo",e),t.states.switchingSource&&t.setStates({switchingSource:!1}),!0)},seekToLive(){const e=this;return!e.states.disabled&&(e.trigger("videoProgress",{...e.states,currentTime:getDuration()}),this.setStates({playing:!0,paused:!1}),e.trigger("seekToLive"),!0)},jump(e){let t=this.states.currentTime+e;return t=t>this.states.duration?this.states.duration-1:t,t=t<0?0:t,this.seekTo(t)},setVolume(e){const t=this;return!t.states.disabled&&(t.setStates({volume:e,mute:0===e}),t.trigger("setVolume",e),!0)},mute(){const e=this;return!e.states.disabled&&(e.setStates({mute:!0}),e.trigger("mute"),!0)},unMute(){const e=this;return!e.states.disabled&&(e.setStates({mute:!1}),e.trigger("unMute"),!0)},userGesture(){this.trigger("userGesture")},toggleDiagnosticWindow(){const e=this;return!e.states.disabled&&(e.states.diagnosticWindow?e.$el.find("div[id^=diagnostic_]").hide():e.trigger("showDiagnosticWindow"),e.states.diagnosticWindow=!e.states.diagnosticWindow,!0)},getCurrentTime(){return this.ApiInterfaceManager.getCurrentTime()},getDuration(){return this.states.overrideDuration?this.states.duration:this.ApiInterfaceManager.getDuration()},getVolume(){return this.ApiInterfaceManager.getVolume()},setStates(e){this.states.disabled||function(e,t){const a=e.$el;let n,r,s=[],o=[];i.each(t,(function(t,a){n=l[t],"playerType"===t&&a!==e.states[t]&&(n="is-vid-"+a+"-player",e.states[t]&&(r="is-vid-"+e.states[t]+"-player",r&&o.push(r)),a=!0),void 0!==n&&(a?s.push(n):o.push(n))})),Object.assign(e.states,t),a.data("states",e.states),s.length>0&&(s=s.join(" "),a.addClass(s)),o.length>0&&(o=o.join(" "),a.removeClass(o))}(this,e)},setMediaSessionMetadata(){try{const e=document.querySelector('meta[property="og:title"]').getAttribute("content"),t=document.querySelector('meta[property="og:site_name"]').getAttribute("content"),a=document.querySelector('meta[property="og:image"]').getAttribute("content");navigator.mediaSession.metadata=new MediaMetadata({title:e,artist:t,artwork:[{src:a,sizes:"512x512",type:"image/png"}]})}catch(e){console.debug("No metadata set for current video.")}}})}(window)},7520:(e,t,a)=>{var i=a(9755);!function(e){"use strict";var t=e.Phoenix;t||(e.Phoenix=t={});var a=t.VideoPlayer=t.VideoPlayer||{},n=a.Views=a.Views||{},r=a.log,s=JSON.stringify,o="/"===location.pathname,l="__gamesVideoPlayer",u=["stickied","embiggened"],c=[],d="frontdoor",p={},g={},y={},v={},h={},m={},f=function(e,t){return e+t.slice(0,1).toUpperCase()+t.slice(1)},P=function(){i.each(g,(function(e,t){var a;h[e]&&(p[(a=e,0<=i.inArray(a,u)&&o&&(a=f(d,a)),a)]=t)}))};n.Preferences=Backbone.View.extend({initialize:function(){var e,t=i.cookie(l);if(i.each(a.Controls,(function(e,t){"preference"===t.prototype.controlType&&t.prototype.states&&(i.each(t.prototype.states,(function(e){c.push(e),t.prototype.saveToCookie&&(h[e]=1)})),t.prototype.saveToCookie||(m[t.prototype.name]=1))})),t)try{e=JSON.parse(t)}catch(e){r("[PREFS] Found broken preferences cookie: ",t)}e?(r("[PREFS] Cookied preferences: ",s(e)),p=i.extend({},e),g=function(e){var t,a=i.extend({},e);return o&&i.each(u,(function(e,i){var n=f(d,i);a[n]?(a[i]=a[n],t=!0):a[i]&&delete a[i]})),i.each(a,(function(e){i.inArray(e,c)<0&&(t=!0,delete a[e])})),t&&r("[PREFS] States converted: ",JSON.stringify(a)),a}(e)):r("[PREFS] No preferences cookie found")},getPreference:function(e,t){var a=g[e];return!a&&t&&v[t]&&(a=v[t][e]),a},load:function(e){var t,a=v[e],n={};a||(r("========== LOAD PREFERENCES =========="),(t=y[e])&&(i.each(t,(function(e,t){i.extend(n,t.loadPreference(g))})),v[e]=n,r("[PREFS] Defaults for playerId ["+e+"]: ",n)))},register:function(e,t){var a=this,n=e.name;m[n]&&(i.extend(g,e.states),delete m[n]),y[t]||(y[t]={}),y[t][n]||(y[t][n]=e,e.on("change",(function(t){a.save(e,t)})))},save:function(e,t){var a,n,o,u,c=!1;(i.each(t,(function(e,t){g[e]!==t&&(g[e]=t,c=!0)})),c)&&(r("[PREFS] save preferences for "+e.name+": ",t),a=t,n=e.name,o=e,i.isEmptyObject(y)||i.each(y,(function(e,t){var i=t[n];i&&o!==i&&i.loadPreference(a)})),P(),u=s(p),i.cookie(l,u,{path:"/",expires:30}),e.trigger("saved"))}})}(window)},197:(e,t,a)=>{var i=a(9755);!function(e){"use strict";var t,a,n=e.Phoenix;n||(e.Phoenix=n={}),a=(t=n.VideoPlayer=n.VideoPlayer||{}).Views=t.Views||{};var r=t.log,s={$progress:".js-progress-position",$buffer:".js-progress-buffer",$timeDisplay:".js-progress-time",$seekDisplay:".js-progress-seek-display",$seekText:".js-progress-seek-text",$seekImage:".js-progress-seek-image",$loader:".js-progress-loaded",$clipBtn:".js-create-clip"},o="[PROGRESS] ",l=/(\d+)x(\d+)_(\d+)_(\d+)\.jpg/g,u=function(e){try{var a=t.query(e);if(null===a)return null;var i=new RegExp(/((\d+)h)?((\d+)m)?((\d+)s?)?/).exec(a),n=parseInt(i[1]||0),r=parseInt(i[4]||0);return parseInt(i[6]||0)+60*r+3600*n}catch(e){return null}},c=function(e,a){var i=e.Player,n=i.states,r=!1,s="Ad: ";Math.floor(a.currentTime)!==Math.floor(n.adCurrentTime)&&(r=!0),r&&(i.setStates({adCurrentTime:a.currentTime}),s+=t.convertTime(a.duration-a.currentTime-1),e.setVideoProgress(s))},d=function(e,a){var n,l,u,c,d,p=e.Player,g=p.states,y=p.videoJSON.isLiveStream,v=t.ratioToPercentString(0),h=v,m="",f=!1;if(a.duration||(a.duration=p.getDuration()),function(e,t){t.averageDroppedFPS&&t.averageDroppedFPS>=0&&(t.averageDroppedFPS>3?e.states.highDroppedFrameCount||(r(o+"Dropped framerate above threshold"),e.setStates({highDroppedFrameCount:!0})):e.states.highDroppedFrameCount&&(r(o+"Dropped framerate below threshold"),e.setStates({highDroppedFrameCount:!1})))}(p,a),!y){g.isSeekDisabled&&!g.ended&&(a.isSeekDisabled=!1);p.states.customStartTime&&a.currentTime>0&&e.seekToCustomStartTime(p)}if(Math.floor(a.currentTime)!==Math.floor(g.currentTime)&&(f=!0),a.hasTimeChange=f,f){if(p.setStates(a),p.$el.trigger("contentProgress",g),p.trigger("contentTimeChange",a),n=Math.floor(a.currentTime),l=Math.floor(a.duration),u=a.isPlayingLive,c=!a.isHDStreamLive,d=!g.isPlayingLive,y&&!p.states.isOffAir&&(u=!(d=n<l-30)),(p.states.overrideDuration||0===l&&n>0)&&(l=n,n>e.maxCurrentTime?e.maxCurrentTime=n:l=e.maxCurrentTime,u=!0,c=!1,p.setStates({duration:l,currentTime:n,overrideDuration:!0,isSeekDisabled:!0})),m=t.convertTime(n),h=t.ratioToPercentString(n/l),u||(m+=" / "+t.convertTime(l)),!0===y){if(!u&&!c&&!d){m="Loading stream data";for(var P=0;P<=(n+1)%3;P++)m+=".";h=v}u&&(h=t.ratioToPercentString(1)),p.setStates({isLive:u,isRewound:d,isOffAir:c})}p.trigger("saveProgress"),p.states.dragging||e.setVideoProgress(m,h),null!==e.EndTime&&n>e.EndTime?e.Loop?e.seekTo(e.StartTime,!0):(p.pause(),e.EndTime=null,t.showSuccessMessage("End of video clip")):e.Loop&&n>=l-1&&e.seekTo(e.StartTime||0,!0);var S=i(s.$clipBtn);S.attr("href",S.data("base-url")+"?start="+Math.floor(n))}},p=function(e){e.videoLoadingHandler||e.Player.on("videoLoading",e.videoLoadingHandler=function(a){!function(e,a){var i,n,r,s=e.states,o=e.els.$loader;i=a.bufferLength||0,n=a.duration||0,i===s.loadingBufferLength&&n===s.loadingDuration||(s.loadingBufferLength=i,s.loadingDuration=n,0<=i&&0<n&&(r=t.ratioToPercentString(i/n)),r&&o&&o.data("width")!==r&&(o.css("width",r),o.data("width",r)))}(e,a.data)})};a.Progress=Backbone.View.extend({events:{"click .js-progress-seektolive":"seekToLive","click .js-progress-buffer":"seekToChange","mousemove .js-progress-buffer":"updateSeekDisplay",keydown:"hotkeyHandler","mousedown.seekSlide .js-progress-buffer":"seekSlideStart","mouseup.seekSlide":"seekSlideStop","touchstart.seekSlide .js-progress-buffer":"seekSlideStart","touchend.seekSlide":"seekSlideStop"},Player:null,els:null,states:{loadingBufferLength:0,loadingDuration:0},mousemoveEvent:"mousemove.seekSlide",touchmoveEvent:"touchmove.seekSlide",ProgressStatus:null,StartTime:null,EndTime:null,Loop:!1,thumbDetails:{width:0,height:0,duration:0,count:0},adVideoProgressHandler:null,videoProgressHandler:null,videoLoadingHandler:null,maxCurrentTime:0,initialize:function(e){var a=this,n=a.Player=e.Player;a.states=i.extend({},a.states),t.getComponents(a,s),n.on("adStart",(function(){var e;a.resourceStart=!0,n.setStates({adPlaying:!0,contentStarted:!1,adCurrentTime:null}),(e=a).adVideoProgressHandler||e.Player.on("videoProgress",e.adVideoProgressHandler=function(t){c(e,t)})})),n.on("adEnd",(function(){var e;a.setVideoProgress(""),(e=a).Player.off("videoProgress",e.adVideoProgressHandler),e.adVideoProgressHandler=null})),n.on("contentStart",(function(){var e;a.resourceStart=!0,(e=a).videoProgressHandler||e.Player.on("videoProgress",e.videoProgressHandler=function(t){d(e,t)}),p(a),n.setStates({adPlaying:!1,contentStarted:!0,started:!0,isSeekDisabled:!1})})),n.on("contentEnd",(function(){var e;a.setVideoProgress(""),(e=a).Player.off("videoProgress",e.videoProgressHandler),e.videoProgressHandler=null,function(e){e.Player.off("videoLoading",e.videoLoadingHandler),e.videoLoadingHandler=null}(a)})),n.on("stateChange",(function(e){a.videoStateChange(e)})),n.on("saveProgress",(function(){a.saveVideoStatus()})),n.on("pause",(function(){a.saveVideoStatus(null,!0),n.videoJSON.isLiveStream&&n.states.contentStarted&&!n.states.isOffAir&&n.setStates({isRewound:!0})})),n.on("videoDone",(function(){n.trigger("saveProgress")})),n.on("initComplete",(function(){a.loadVideoStatus()})),a.StartTime=u("t"),a.EndTime=u("e"),a.Loop=!!t.query("loop"),a.Loop&&n.setStates({looping:!0}),(null===a.StartTime||a.StartTime>a.EndTime)&&(a.EndTime=null);var r=l.exec(a.els.$seekImage.css("background-image"));a.thumbDetails=i.extend({},a.thumbDetails),r&&(a.thumbDetails.width=parseInt(r[1],10),a.thumbDetails.height=parseInt(r[2],10),a.thumbDetails.duration=parseInt(r[3],10),a.thumbDetails.count=parseInt(r[4],10))},videoStateChange:function(e){var t,a=this.Player,i={contentLoading:!1};switch(e.newState){case 1:i.playing=!0,i.paused=!1,t="contentPlay";break;case 2:i.playing=!1,i.paused=!0,t="contentPause";break;case 3:i.contentLoading=!0}a.setStates(i),t&&a.$el.trigger(t)},setVideoProgress:function(e,t){var a=this.els.$timeDisplay,i=this.els.$progress;a&&a.data("progress-msg")!==e&&(a.html(e),a.data("progress-msg",e)),void 0!==t&&i&&i.data("width")!==t&&(i.css("width",t),i.data("width",t))},seekToCustomStartTime:function(){var e,a=this.Player,i=a.states,n=i.customStartTime,s=!0;if(n+30>e&&a.setStates({customStartTime:0}),!i.customStartTimeDisabled&&!i.adPlaying&&i.contentStarted&&0<n){if(void 0===(e=a.getDuration())||0===e||!0===isNaN(e))return void r("wait until we have a legit duration");a.setStates({customStartTime:0}),Math.floor(n)<Math.floor(e)&&n>1&&(s=!a.states.switchingSource,a.seekTo(n),s&&t.showSuccessMessage("Resuming video from saved position"))}},loadVideoStatus:function(){var e=this,a=e.Player;e.ProgressStatus||(e.ProgressStatus=new t.Models.VideoStatus({name:"progress",videoJSON:a.videoJSON,options:{cookie:!0,server:!0}})),e.StartTime>0?a.setStates({customStartTime:e.StartTime}):e.ProgressStatus.fetch({success:function(e){e>0&&a.setStates({customStartTime:e})}})},saveVideoStatus:function(e,t){var a=this,i=a.Player;a.ProgressStatus&&(e=e||i.getCurrentTime(),i.states.ended||e>i.getDuration()-60?a.ProgressStatus.markWatched():a.ProgressStatus.save(e,{force:!!t}))},deleteVideoStatus:function(){this.ProgressStatus.delete()},seekToRatio:function(e){var t=this.Player.getDuration();this.seekTo(t*e)},seekSlideStart:function(e){var a=this,i="mousedown"===e.type?a.mousemoveEvent:a.touchmoveEvent;"mousedown"===e.type&&1!==e.which||(a.Player.setStates({dragging:!0}),a.els.$buffer.on(i,(function(e){var i=t.getEventInContainerRatio(e,a.els.$buffer),n=t.ratioToPercentString(i);a.setVideoProgress("",n,"0%")})))},seekSlideStop:function(e){var t=this,a="mouseup"===e.type?t.mousemoveEvent:t.touchmoveEvent;"mouseup"===e.type&&1!==e.which||t.Player.states.dragging&&(t.Player.setStates({dragging:!1}),t.seekToChange(e),t.els.$buffer.off(a))},seekTo:function(e,t){var a=this,i=a.Player,n=i.getDuration();t||(a.StartTime=null,a.EndTime=null,a.Loop=!1),Math.floor(e)<Math.floor(n)&&(i.seekTo(e),a.saveVideoStatus(e,!0),i.setStates({customStartTime:0}))},jump:function(e){var t=this.Player,a=t.getDuration();Math.floor(e)<Math.floor(a)&&(t.jump(e),this.saveVideoStatus(e))},seekToLive:function(e){var t=this.Player;t.setStates({isRewound:!1}),t.seekToLive()},seekToChange:function(e){var a=t.getEventInContainerRatio(e,this.els.$buffer);this.seekToRatio(a)},updateSeekDisplay:function(e){var a=this,i=a.Player,n=t.getEventInContainerRatio(e,a.els.$buffer),r=t.ratioToPercentString(n),s=i.getDuration()*n;a.els.$seekDisplay.css("left",r),a.els.$seekText.text(t.convertTime(s));var o=Math.round(a.thumbDetails.count*n);a.els.$seekImage.css("background-position-x",o*a.thumbDetails.width*-1+"px")},hotkeyHandler:function(e){var t=this,a=t.Player;if(!(e.metaKey||e.ctrlKey||e.shiftKey||e.altKey))if(192===e.which)a.toggleDiagnosticWindow();else if(35===e.which)t.seekTo(a.getDuration()-5);else if(36===e.which)t.seekTo(0);else if(188===e.which)t.jump(-.1);else if(190===e.which)t.jump(.1);else if(37===e.which)t.jump(-5);else if(39===e.which)t.jump(5);else if(74===e.which)t.jump(-10);else if(76===e.which)t.jump(10);else if(e.which>=48&&e.which<=57){var i=.1*(e.which-48),n=Math.floor(a.getDuration()*i);t.seekTo(n)}}})}(window)},2257:(e,t,a)=>{"use strict";function i(){return"loggedIn"===document.querySelector("meta[name=userAuthState]").content}a.d(t,{Z:()=>i})}}]);